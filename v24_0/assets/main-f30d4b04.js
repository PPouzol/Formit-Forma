var Ir=Object.defineProperty;var xr=(e,t,r)=>t in e?Ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ne=(e,t,r)=>(xr(e,typeof t!="symbol"?t+"":t,r),r);import{R as pt,r as B,j as m,F as he,a as Je,b as ae,c as Ar}from"./index-6a0ed8c7.js";/**
 * @remix-run/router v1.3.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ze.apply(this,arguments)}var ve;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ve||(ve={}));const Ft="popstate";function Cr(e){e===void 0&&(e={});function t(o,a){let{pathname:i="/",search:s="",hash:l=""}=St(o.location.hash.substr(1));return ht("",{pathname:i,search:s,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(o,a){let i=o.document.querySelector("base"),s="";if(i&&i.getAttribute("href")){let l=o.location.href,u=l.indexOf("#");s=u===-1?l:l.slice(0,u)}return s+"#"+(typeof a=="string"?a:nr(a))}function n(o,a){Pr(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return kr(t,r,n,e)}function rr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Pr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Tr(){return Math.random().toString(36).substr(2,8)}function Mt(e,t){return{usr:e.state,key:e.key,idx:t}}function ht(e,t,r,n){return r===void 0&&(r=null),ze({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?St(t):t,{state:r,key:t&&t.key||n||Tr()})}function nr(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function St(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function kr(e,t,r,n){n===void 0&&(n={});let{window:o=document.defaultView,v5Compat:a=!1}=n,i=o.history,s=ve.Pop,l=null,u=f();u==null&&(u=0,i.replaceState(ze({},i.state,{idx:u}),""));function f(){return(i.state||{idx:null}).idx}function p(){s=ve.Pop;let d=f(),x=d==null?null:d-u;u=d,l&&l({action:s,location:y.location,delta:x})}function b(d,x){s=ve.Push;let S=ht(y.location,d,x);r&&r(S,d),u=f()+1;let _=Mt(S,u),k=y.createHref(S);try{i.pushState(_,"",k)}catch{o.location.assign(k)}a&&l&&l({action:s,location:y.location,delta:1})}function A(d,x){s=ve.Replace;let S=ht(y.location,d,x);r&&r(S,d),u=f();let _=Mt(S,u),k=y.createHref(S);i.replaceState(_,"",k),a&&l&&l({action:s,location:y.location,delta:0})}function v(d){let x=o.location.origin!=="null"?o.location.origin:o.location.href,S=typeof d=="string"?d:nr(d);return rr(x,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,x)}let y={get action(){return s},get location(){return e(o,i)},listen(d){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(Ft,p),l=d,()=>{o.removeEventListener(Ft,p),l=null}},createHref(d){return t(o,d)},createURL:v,encodeLocation(d){let x=v(d);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:b,replace:A,go(d){return i.go(d)}};return y}var Lt;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Lt||(Lt={}));function Or(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const Er=["post","put","patch","delete"];[...Er];/**
 * React Router v6.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rr(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const Fr=typeof Object.is=="function"?Object.is:Rr,{useState:Mr,useEffect:Lr,useLayoutEffect:jr,useDebugValue:$r}=pt;function Dr(e,t,r){const n=t(),[{inst:o},a]=Mr({inst:{value:n,getSnapshot:t}});return jr(()=>{o.value=n,o.getSnapshot=t,ct(o)&&a({inst:o})},[e,n,t]),Lr(()=>(ct(o)&&a({inst:o}),e(()=>{ct(o)&&a({inst:o})})),[e]),$r(n),n}function ct(e){const t=e.getSnapshot,r=e.value;try{const n=t();return!Fr(r,n)}catch{return!0}}function _r(e,t,r){return t()}const Nr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ur=!Nr,Gr=Ur?_r:Dr;"useSyncExternalStore"in pt&&(e=>e.useSyncExternalStore)(pt);const Wr=B.createContext(null),or=B.createContext(null);function Br(){return B.useContext(or)!=null}var jt;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(jt||(jt={}));var $t;(function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})($t||($t={}));function Vr(e){let{basename:t="/",children:r=null,location:n,navigationType:o=ve.Pop,navigator:a,static:i=!1}=e;Br()&&rr(!1);let s=t.replace(/^\/*/,"/"),l=B.useMemo(()=>({basename:s,navigator:a,static:i}),[s,a,i]);typeof n=="string"&&(n=St(n));let{pathname:u="/",search:f="",hash:p="",state:b=null,key:A="default"}=n,v=B.useMemo(()=>{let y=Or(u,s);return y==null?null:{pathname:y,search:f,hash:p,state:b,key:A}},[s,u,f,p,b,A]);return v==null?null:B.createElement(Wr.Provider,{value:l},B.createElement(or.Provider,{children:r,value:{location:v,navigationType:o}}))}var Dt;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(Dt||(Dt={}));new Promise(()=>{});/**
 * React Router DOM v6.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zr(e){let{basename:t,children:r,window:n}=e,o=B.useRef();o.current==null&&(o.current=Cr({window:n,v5Compat:!0}));let a=o.current,[i,s]=B.useState({action:a.action,location:a.location});return B.useLayoutEffect(()=>a.listen(s),[a]),B.createElement(Vr,{basename:t,children:r,location:i.location,navigationType:i.action,navigator:a})}var _t;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(_t||(_t={}));var Nt;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Nt||(Nt={}));const V=0,xe=3.2808399,we=.3047999995367042,Hr="root",J={FORMA_CONTEXT:"Forma Context",FORMA_TERRAIN:"Forma Terrain",SURROUNDING_BUILDINGS:"Surrounding Buildings",FORMA_PROPOSAL_BUILDINGS:"Forma Proposal Buildings",FORMA_AUTO_BUILDINGS:"Forma Auto Buildings",FORMA_BUILDINGS:"Forma Buildings",FORMA_SITE_LIMIT:"site_limit",FORMA_BUILDING:"building",FORMA_VEGETATION:"vegetation",FORMA_GENERIC:"generic",FORMA_ROAD:"road",FORMA_RAILS:"rails",FORMA_PROPERTY_BOUNDARY:"property_boundary",FORMA_ZONE:"zone",FORMA_BUILDING_ENVELOPE:"building_envelope"},Ae=e=>{const t=e.split(":");if(t.length===6){const[,r,n,o,a,i]=t;return{namespace:r,system:n,authcontext:o,id:a,revision:i}}else if(t.length===5){const[,r,n,o,a]=t;return{namespace:r,system:n,id:o,revision:a}}throw new Error("urn is not of length 5 or 6")},ar=(e,t,r=!0)=>{let n;const{authcontext:o,system:a,id:i,revision:s}=Ae(e);if(o)if(r)n=`/api/${a}/elements/${i}/revisions/${s}?authcontext=${o}&version=2`;else{const l=i.indexOf("+");n=`/api/${a}/elements/${i.slice(0,l)}/revisions/${s}?authcontext=${o}&version=2`}else n=`/api/${a}/elements/${i}/revisions/${s}?projectId=${t}`;return n},Te=Symbol("IDBStore");class Yr{constructor(t="composi-idb",r="composi-store"){this.storeName=r,this.dbName=t,this._dbp=new Promise((o,a)=>{const i=indexedDB.open(t,1);i.onerror=()=>a(i.error),i.onsuccess=()=>{o(i.result)},i.onupgradeneeded=()=>{i.result.createObjectStore(r)}}),this[Te]=(o,a)=>this._dbp.then(i=>new Promise((s,l)=>{const u=i.transaction(this.storeName,o);u.oncomplete=()=>s(),u.onabort=u.onerror=()=>l(u.error),a(u.objectStore(this.storeName))}))}}let lt;function De(){return lt||(lt=new Yr),lt}function Xr(e,t=De()){let r;return t[Te]("readonly",n=>{r=n.get(e)}).then(()=>r.result)}function Jr(e,t,r=De()){return r[Te]("readwrite",n=>{n.put(t,e)})}function Kr(e,t=De()){return t[Te]("readwrite",r=>{r.delete(e)})}function qr(e=De()){return e[Te]("readwrite",t=>{t.clear()})}function Zr(e=De()){const t=[];return e[Te]("readonly",r=>(r.openKeyCursor||r.openCursor).call(r).onsuccess=function(){this.result&&(t.push(this.result.key),this.result.continue())}).then(()=>t)}const He={get:Xr,set:Jr,remove:Kr,clear:qr,keys:Zr,name:"composi-idb",storeName:"composi-store"};function Qr(e,t){He.set(e,t)}async function ir(e){return await He.get(e)}async function en(e){const t=await He.keys();for(const r of t)r.includes(e)&&(await He.remove(r),console.log(`removing ${r} from cache`))}function tn(e,t){FormIt.Layers.AddLayer(e,t,!0);let r=FormIt.Layers.GetLayerID(t),n;return r==WSM.INVALID_ID?console.error("Cannot retrieve the Forma layer"):(n=sr(e,t),n==WSM.INVALID_ID&&(console.error("Cannot retrieve the Forma WSM layer"),r=void 0)),{formItLayerId:r,wsmLayerId:n}}async function sr(e,t){const r=await WSM.APIGetAllObjectsByTypeReadOnly(e,WSM.nObjectType.nLayerType);let n=WSM.INVALID_ID;for(let o=0;o<r.length;o++)if((await WSM.APIGetLayerDataReadOnly(e,r[o])).name==t){n=r[o];break}return n}async function rn(){const e=["site_limit","building","vegetation","generic","road","rails","property_boundary","zone","building_envelope"],t=Object.values(J).filter(a=>e.includes(a));let r=[];for(const a of t)r.push(mt(a));return r.push(mt(J.FORMA_CONTEXT)),(await Promise.all(r)).filter(a=>a.formItLayerId===WSM.INVALID_ID||!a.wsmLayerId||a.wsmLayerId===-1).length===0}async function mt(e=J.FORMA_CONTEXT){const t=await FormIt.Layers.GetLayerID(e);if(t===WSM.INVALID_ID){const r=await tn(V,e),n=r.formItLayerId,o=r.wsmLayerId,a="FormIt::OutOfContextLayer";if(n===WSM.INVALID_ID||!o)return r;if(!WSM.Utils.SetOrCreateStringAttributeForObject(V,o,a,"true")){console.error("Cannot set out of context attribute");return}return FormIt.Layers.SetLayerPickable(n,!1),r}return{formItLayerId:t,wsmLayerId:t!==WSM.INVALID_ID?await sr(V,e):-1}}function nn(e,t){for(const[r,n]of Object.entries(t))for(const o of n)if(e.includes(o))return r}const Se="https://local.spacemaker.ai:3001",on="https://app.spacemaker.ai";class an{getWorkspaces(){return fetch(`${Se}/api/workspaces`).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()})}getProjects(t){return fetch(`${Se}/api/projects?customer=${t}&include_archived=false`).then(r=>{if(!r.ok)throw new Error(r.statusText);return r.json()})}countProposals(t){return fetch(`${Se}/api/proposal/elements/count?authcontext=${t}`).then(r=>{if(!r.ok)throw new Error(r.statusText);return r.json()})}getProposals(t){return fetch(`${Se}/api/proposal/elements?authcontext=${t}&version=2`).then(r=>{if(!r.ok)throw new Error(r.statusText);return r.json()})}getProposalElement(t,r){try{const n=`/api/proposal/elements/${t}?authcontext=${r}`;return fetch(n).then(o=>{if(!o.ok)throw new Error(o.statusText);return o.json()})}catch{return null}}FormatThumbnailUrl(t,r){return`${on}/api/thumbnails/v2/${r}?size=170&authcontext=${t}&projectId=${t}`}fetchRawDatas(t){return t.indexOf("/")===0&&(t=`${Se}${t}`),fetch(t,{method:"GET",headers:{"Content-Type":"application/json","Set-Cookie":"true"}})}getAsJson(t){return t.indexOf("/")===0&&(t=`${Se}${t}`),fetch(t,{method:"GET",headers:{"Content-Type":"application/json","Set-Cookie":"true"}}).then(r=>r.ok?r.json():!1)}}const de=new an;async function It(e){}async function xt(e,t,r,n){r&&It(e.savePath),t?n&&n(e):await de.fetchRawDatas(e.FetchUrl).then(async o=>o.blob()).then(async o=>{n&&n(e)})}const Be=e=>{const t=[...e];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t};function sn(e,t){const r={},n=(o,a=[])=>{var u;const i=e[o.urn];if(!i)throw new Error(`Child ${o.key} points to unknown urn ${o.urn}`);const s=[...a,o.key],l=s.join("/");r[l]=o.urn,(u=i.children)==null||u.forEach(f=>n(f,s))};return n({urn:t,key:Hr}),r}function cn(e,t,r){var a,i,s;const n={},o=[];for(const[l,u]of Object.entries(t)){const f=e[u],p=l.split("/").slice(0,2).join("/"),b=f.properties.spacemakerObjectStorageReferenceFormats,A=(b==null?void 0:b[0])==="axm",{system:v}=Ae(f.urn),y=ln(l,e,t);if(v==="integrate"&&A){const S={...f,parentTransform:f.transform,path:l};o.push(S);continue}if(f.properties.category==="ConceptualElement")continue;const x=(s=(i=(a=f.properties)==null?void 0:a.geometry)==null?void 0:i.volumeMesh)==null?void 0:s.url;if(x){const S=Ae(u).id,_=f.properties.geometry.volumeMesh.id;n[x]||(n[x]={elements:[]});const k=r==null?void 0:r.includes(p);n[x].elements.push({transform:y,needsConverted:k,id:S,geometryId:_,properties:f==null?void 0:f.properties,urn:f.urn,fullIdPath:l})}}return{glbUrlMap:n,axmList:o}}function ln(e,t,r){const n=e.split("/");let o,a=0,i=n[a];return o=cr(i,a,r,t,o,n),o}const cr=(e,t,r,n,o,a)=>{var y,d;const i=e.split("/"),s=i.length>1?i.slice(0,t).join("/"):void 0,l=r[s],u=n[l],f=(d=(y=u==null?void 0:u.children)==null?void 0:y.find(x=>x.key===i.slice(-1).toString()))==null?void 0:d.transform,p=r[i.join("/")],b=n[p],A=b==null?void 0:b.transform;return o=Ut(o,Ut(f,A)),t++,a.slice(t).length>0&&(e=a.slice(0,t+1).join("/"),cr(e,t,r,n,o,a)),o},Ut=(e,t)=>{let r=e;if(t)if(e){let n=WSM.Geom.Transf3d();n.data=Be(e);const o=WSM.Geom.Transf3d();o.data=Be(t),FormItInterface.CallMethod("FormitPlugin.Multiply",[n,o],a=>{r=Be(a.data)})}else r=t;return r};async function un(e,t){const r="/tmp/terrain.window.WSM",n=Ae(t.urn).revision,o=await dn(`3d-sketch-terrain-${e}-revision-${n}`);try{await xt({savePath:r},o,!0,async()=>{const a=await WSM.APIGetIdOfActiveDeltaReadOnly(V);await FormIt.ImportFile(r,!1,WSM.INVALID_ID,!1);const i=await WSM.APIGetIdOfActiveDeltaReadOnly(V),l=(await WSM.APIGetCreatedChangedAndDeletedInDeltaRangeReadOnly(V,a,i,[WSM.nGroupType])).created;if(await It(r),l.length===1)return{idArray:l,isTerrain:!0,isAxm:!1};throw new Error("Error reading terrain transform from cached window.WSM, did not get 1 created group")})}catch(a){return console.log(`Error loading terrain from cache - ${a}`),{idArray:[]}}}async function dn(e){let t=0;return new Promise((r,n)=>{try{const o=setInterval(async()=>{const a=await ir(e);a?(clearInterval(o),r(a)):(t++,t%100===0&&console.log(`Did not find cache for ${e}, still waiting.`))},100)}catch(o){n(o)}})}async function fn(e,t,r,n,o){const a=`/tmp/${r}.glb`,i=e.includes("terrain");return new Promise((s,l)=>{try{xt({fetchUrl:e,savePath:a},null,!0,async()=>{const u=[],f=[];let p=[],b;if(t.forEach(A=>{A.needsConverted?f.push(A):u.push(A)}),u.length>0){const A=Gt({fileLocation:a,elementDetails:u,isTerrain:i,transform:void 0}),v=nn(u[0].fullIdPath,n);if(v){const d=await mt(v);FormIt.Layers.AssignLayerToObjects(d.formItLayerId,[V,A])}const y=!o.includes(v);FormIt.Layers.SetLayerVisibility(v,y),p=[...p,A]}if(f.length>0){const A=Gt({fileLocation:a,elementDetails:f,isTerrain:i,transform:void 0}),v=WSM.APIGetGroupReferencedHistoryReadOnly(V,A),y=WSM.APIGetAllObjectsByTypeReadOnly(v,WSM.nMeshType),d=Math.sqrt(3)/2;WSM.APIConvertMeshesToObjects(v,y,d),b=A,p=[...p,A]}It(a),s({allIdsCreated:p,idEditingForConversion:b,isTerrain:i})})}catch(u){l(`Failed to request and load file into memory for url - ${e} - error: ${u}`)}})}function Gt({fileLocation:e,elementDetails:t,isTerrain:r,transform:n}){const a=t.map(d=>({objectName:"GltfNodeInfo",id:d.geometryId,transform:d.transform||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]})).filter(d=>d.id);let i=WSM.Geom.Transf3d();n&&(i.data=Be(n));const s=WSM.Geom.Point3d(0,0,0),l=WSM.Vector3d.Vector3d(xe,xe,xe),u=WSM.Transf3d.MakeScalingTransform(s,l);i=WSM.Transf3d.Multiply(u,i);const f=WSM.APIGetIdOfActiveDeltaReadOnly(V);WSM.Gltf.APILoadGltfFile(V,e,i,WSM.INVALID_ID,r?WSM.nGeneratedNormalsOptions.nSmoothNormals:WSM.nGeneratedNormalsOptions.nUnsharedNormals,a||[],!r);const p=WSM.APIGetIdOfActiveDeltaReadOnly(V),A=WSM.APIGetCreatedChangedAndDeletedInDeltaRangeReadOnly(V,f,p,[WSM.nMeshType,WSM.nInstanceType]).created,v=WSM.Utils.CreateAlignedAndCenteredGroup(V,A),y=WSM.APIGetObjectsByTypeReadOnly(V,v,WSM.nObjectType.nInstanceType);if(y.length!==1){console.error("Created instanceIds should be 1");return}return y[0]}var Ue,pn=new Uint8Array(16);function hn(){if(!Ue&&(Ue=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ue))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ue(pn)}const mn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function gn(e){return typeof e=="string"&&mn.test(e)}var ee=[];for(var ut=0;ut<256;++ut)ee.push((ut+256).toString(16).substr(1));function yn(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(ee[e[t+0]]+ee[e[t+1]]+ee[e[t+2]]+ee[e[t+3]]+"-"+ee[e[t+4]]+ee[e[t+5]]+"-"+ee[e[t+6]]+ee[e[t+7]]+"-"+ee[e[t+8]]+ee[e[t+9]]+"-"+ee[e[t+10]]+ee[e[t+11]]+ee[e[t+12]]+ee[e[t+13]]+ee[e[t+14]]+ee[e[t+15]]).toLowerCase();if(!gn(r))throw TypeError("Stringified UUID is invalid");return r}function Le(e,t,r){e=e||{};var n=e.random||(e.rng||hn)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return yn(n)}async function lr(e,t,r){typeof e=="string"&&(e={key:Le(),urn:e,transform:void 0});let n;if(r[e.urn])n=r[e.urn],await Wt(n,t,r);else{const o=ar(e.urn,t);await de.getAsJson(o).then(async a=>{for(const[i,s]of Object.entries(a))r[i]=s;n=r[e.urn],await Wt(n,t,r)})}}async function Wt(e,t,r){var n;if(((n=e.children)==null?void 0:n.length)>0)for(const o of e.children)await lr(o,t,r)}function vn(e,t,r){let n=[];for(const o of e.children)n.push(lr(o,t,r));return n}async function wn(e,t,r,n,o,a){const i=sn(e,t.urn),{glbUrlMap:s,axmList:l}=cn(e,i,r);let u;debugger;for(const[f,p]of Object.entries(s))if(f.includes("terrain")){const b=p.elements[0];if(u){if(u!==b.id)throw new Error(`Found terrain id ${b.id} does not match id of previously found terrain id ${u}. Unable to determine which terrain to load.`);console.warn(`Found a duplicate terrain in proposal. This may not be a problem. ${b.id}`)}else u=b.id,await un(n,b)}else fn(f,p.elements,Le(),o,a)}async function bn(e,t,r){var i;const n=await de.getProposalElement(t,e);if(!n)return;const o=Object.values(n).find(s=>s.properties.category==="proposal"),a=(i=o==null?void 0:o.children)==null?void 0:i.find(s=>s.urn.includes("terrain"));Sn(a,e,t.proposalId,r)}async function Sn(e,t,r,n){var s,l,u;debugger;const o=Ae(e.urn).revision;let a=`3d-sketch-terrain-${r}-revision-${o}`;if(await ir(a))n&&n();else{const f=ar(e.urn,t),b=await(await fetch(f)).json();let A,v;if(WSM.APIDeleteAllHistories(),WSM.APICreateHistory(V),FormIt.UndoManagement.BeginState(),Object.entries(b).length===1)for(const[,P]of Object.entries(b))A=(u=(l=(s=P.properties)==null?void 0:s.geometry)==null?void 0:l.volumeMesh)==null?void 0:u.url,v=await xn(P.properties,t);else throw new Error("Did not find exactly one terrain urn");const y="/tmp/terrain.glb",d="/tmp/terrain.wsm";let x=await WSM.Geom.Transf3d();debugger;const S=await WSM.Geom.Point3d(0,0,0),_=await WSM.Geom.Vector3d(xe,xe,xe),k=await WSM.Geom.MakeScalingTransform(S,_);let L;await FormItInterface.CallMethod("FormitPlugin.Multiply",[k,x],async P=>{L=P,console.info(`multiply result: ${L}`),x=JSON.parse(L),await xt({fetchUrl:A,savePath:y,transf3d:x,materialId:v,tempWsmLocation:d,key:a,proposalId:r,terrainRevisionId:o,callback:n},null,!0,In)})}}async function In(e,t){await FormItInterface.CallMethod("FormitPlugin.APILoadGltfFile",e,async()=>{const r=await WSM.APIGetAllObjectsByTypeReadOnly(0,WSM.nObjectType.nMeshType);if(await WSM.APISetObjectsMaterial(V,r,e.materialId),r.length!==1)throw new Error("3D Sketch terrain worker - Did not create exactly one terrain mesh");const o=(await WSM.APIGetBoxReadOnly(V,r[0])).lower.z-1,a=await WSM.Geom.TranslateTransform(await WSM.Geom.Transf3d(),await WSM.Geom.Vector3d(0,0,-o)),i=await WSM.Utils.CreateAlignedAndCenteredGroup(V,r);await WSM.APITransformObject(V,i,a),await WSM.Utils.SetOrCreateStringAttributeForObject(V,i,FormIt.TERRAIN_KEY,JSON.stringify(-o)),await FormIt.UndoManagement.EndState("Initial State"),await WSM.APISaveToFileReadOnly(V,i,e.tempWsmLocation,0,!0,1,[]);const s=window.FormItModule.FormIt_ReadFile(tempWsmLocation);en(`3d-sketch-terrain-${e.proposalId}`),Qr(e.key,s),console.log(`persisted terrain in cache: ${e.proposalId}-revision-${e.terrainRevisionId}`),t&&t()})}async function xn(e,t){const r=await de.getAsJson(`/api/projects/${t}`),n="/texture/v2",o=e.geoReference.srid,a=encodeURIComponent(JSON.stringify(e.bbox)),i=`${n}/texture.jpeg?countryCode=${r.countryCode}&srid=${o}&bbox=${a}&size=4096&projectId=${t}`,[s]=await Promise.all([await de.getAsJson(i)]),l=s.link,u="/terrainTexture.jpeg",f=await fetch(l);if(f.ok){const p=await f.blob(),b=await createImageBitmap(p,{imageOrientation:"flipY"}),A=new self.OffscreenCanvas(b.width,b.height);A.getContext("bitmaprenderer").transferFromImageBitmap(b);const y=await A.convertToBlob(),d=new Uint8Array(await y.arrayBuffer()),x=await WSM.APICreateTexture(V,[...d],!0,u);return await WSM.APICreateMaterial(V,WSM.Color(225,225,225,255),1,1,x)}}var ur={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ReferenceType=void 0,function(t){t.INLINE="Inline",t.REMOTE="Remote"}(e.ReferenceType||(e.ReferenceType={}))})(ur);const An=e=>[e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]],Cn=e=>{const t={},r=[],n=[];for(const o of e.indices){const[a,i,s]=e.vertices.slice(o*3,o*3+3);t[a]||(t[a]={}),t[a][i]||(t[a][i]={}),t[a][i][s]||(t[a][i][s]=n.length/3,n.push(a,i,s)),r.push(t[a][i][s])}return{...e,indices:r,vertices:n}},Pn=e=>{let t=[],r=[];for(const n of e){const o=r.length/3;t=t.concat(n.indices.map(a=>a+o)),r=r.concat(n.vertices)}return{...e[0],indices:t,vertices:r}},Tn=async e=>{const t={id:Le(),properties:{category:"ConceptualRoot"},children:[]},r={[t.id]:t},n={rootElement:t.id,elements:r};let o=await WSM.Geom.Transf3d();for(const a of e){const i=Cn(Pn(a.meshes)),s={id:Le(),children:[],properties:{category:"ConceptualElement",geometry:{type:ur.ReferenceType.INLINE,format:"Mesh",verts:i.vertices,faces:i.indices}}};a.transforms[0].data&&(o.data=a.transforms[0].data),r[s.id]={...s},t.children.push({id:s.id,transform:An(o.data)})}return n};async function kn(e,t){En().then(async r=>{FormIt.Layers.SetLayerVisibility(e,!1).then(()=>{FormItInterface.CallMethod("FormitPlugin.GetAllGeometryInformation",[],async n=>{let o=JSON.parse(n);FormIt.Layers.SetLayerVisibility(e,!0).then(()=>{On(r).then(()=>{Fn(V,o,t)})})})})})}async function On(e){await e.forEach(async t=>{t.layerData&&(t.layerData.Visible=t.previousVisiblity,await FormIt.Layers.SetLayersVisibility([t.layerData]))})}async function En(){const e=[J.FORMA_CONTEXT,J.FORMA_TERRAIN,J.SURROUNDING_BUILDINGS,J.FORMA_AUTO_BUILDINGS,J.FORMA_PROPOSAL_BUILDINGS,J.FORMA_SITE_LIMIT,J.FORMA_BUILDING,J.FORMA_VEGETATION,J.FORMA_GENERIC,J.FORMA_ROAD,J.FORMA_RAILS,J.FORMA_PROPERTY_BOUNDARY,J.FORMA_ZONE,J.FORMA_BUILDING_ENVELOPE];let t=[];for(const r of e){let n=await Rn(r);n.layerData&&t.push(n)}return t}async function Rn(e){const t=await FormIt.Layers.GetLayerID(e);let r=!1,n;return t!=WSM.INVALID_ID&&(n=await FormIt.Layers.GetLayerData(t),r=n.Visible,n.Visible=!1,await FormIt.Layers.SetLayersVisibility([n])),{layerData:n,previousVisiblity:r}}async function Fn(e=WSM.INVALID_ID,t,r){FormItInterface.CallMethod("FormitPlugin.ComputeGeometryFromLevels",[e],n=>{let o={},a=JSON.parse(n);a&&a.map(i=>{const{outer_loop:s,inner_loops:l}=i.second[0],f=[s.vertices.map(p=>[p.x*we,p.y*we])];if(l.length>0){const p=l[0].vertices.map(b=>[b.x*we,b.y*we]);f.push(p)}return f}),r&&r(t,o)})}async function Mn(e){await FormIt.GroupEdit.EndEditInContext(),await FormIt.Selection.SelectAll();var t=await FormIt.FormaAddIn.SaveCurrentAXMtoTempFile(!0),r=await FormIt.FormaAddIn.ReadAXMandMakeBlob(t);await FormIt.Selection.ClearSelections();var n=WSM.APIGetActiveHistory(),o=WSM.Transf3d.MakeScalingTransform(WSM.Geom.Point3d(0,0,0),WSM.Vector3d.Vector3d(we,we,we)),a=WSM.Gltf.APIWriteGltfFileReadOnly(n,e,!1,o);return{savedAxm:r,savedGlb:a}}async function Ln(e,t,r,n){let o=new Blob([e],{type:"application/octet-stream"});const a=new File([o],"internalRepresentation.axm");o=new Blob([t],{type:"application/octet-stream"});const i=new File([o],"internalRepresentation.axm");await jn(a,i,r).then(s=>{n&&n(s)})}async function jn(e,t,r){const n=JSON.stringify({projectId:r});try{const o=await fetch("/api/spacemaker-object-storage/v1/",{method:"POST",body:n,headers:{"Content-Type":"application/json","Set-Cookie":"true"}});if(o.ok){debugger;const{id:a,url:i,fields:s}=await o.json(),l=new FormData;if(Object.keys(s).forEach(f=>{l.append(f,s[f])}),l.append("file",e),(await fetch(i,{method:"POST",body:l,headers:{"Set-Cookie":"true"}})).ok)return a}}catch{return!1}return!1}async function $n(e,t){Tn(e).then(r=>{t&&t(r)})}async function Dn({formitGeometry:e,proposalId:t,projectId:r,polygonData:n,objectId:o,callback:a}){Mn("").then(({savedAxm:s,savedGlb:l})=>{if(!s||!l){console.error("Can't save temporary wsm file.");return}$n(e,async u=>{Ln(s,l,r,async f=>{if(!f){a&&a(!1);return}_n(r,u,f,n).then(async p=>{p?Nn({elementId:t,authContext:r,createdUrn:p.urn}).then(b=>{a&&a(b)}):a&&a(!1)})})})})}async function _n(e,t,r,n){let o=await t;const a=o.elements[o.rootElement].properties;a.spacemakerObjectStorageReferences=[r],a.spacemakerObjectStorageReferenceFormats=["wsm"],n.length>0&&(a.areaStatsReps={grossFloorPolygons:n});const i=await Un(e);if(i){const s=await Gn(i.url,JSON.stringify(o));try{if(s){const l=`/api/integrate/elements?version=2&authcontext=${e}&s3Id=${i.id}`,u=await fetch(l,{method:"POST"});if(u.ok)return await u.json()}}catch{return!1}}return!1}async function Nn({elementId:e,authContext:t,createdUrn:r}){var o;const n=await de.getProposalElement(e,t);if(n===null){console.error("proposal can't be retrieved to be updated");return}for(const[a,i]of Object.entries(n))if(((o=i.properties)==null?void 0:o.category)==="proposal"){const{revision:s}=Ae(a);if(r)i.children.push({urn:r,key:Le()});else return console.error("not a valid update, bad parameters"),!1;try{return(await fetch(`/api/proposal/elements/${e}/revisions/${s}?version=2&authcontext=${t}`,{method:"PUT",body:JSON.stringify(i)})).ok}catch{return!1}}}async function Un(e){try{const t=await fetch(`/api/integrate/upload_link?authcontext=${e}`,{method:"GET",headers:{"Content-Type":"application/json","Set-Cookie":"true"}});if(t.ok)return await t.json()}catch{return!1}return!1}async function Gn(e,t){try{return(await fetch(e,{method:"PUT",body:t})).ok}catch{return!1}}class Wn{getCookie(t){const r=t.length+1;return document.cookie.split(";").map(n=>n.trim()).filter(n=>n.substring(0,r)===`${t}=`).map(n=>decodeURIComponent(n.substring(r)))[0]||null}accessSpacemaker(t){let r=null;if(t){r=window.open("https://app.spacemaker.ai/auth/login?rd=https%3A%2F%2Fapp.spacemaker.ai%2Fprojects","_blank","width= 500px, height=500px");let n=setInterval(()=>{this.getCookie("ajs_user_id")!==null&&(clearInterval(n),r!==null&&r.close())},1e3)}else{const o="https://local.spacemaker.ai:3001?loggedIn=1";window.location.replace(`https://app.spacemaker.ai/auth/login?rd=${o}`)}}async save({projectId:t,proposalId:r},n){FormItInterface.CallMethod("FormitPlugin.GetAllGeometryInformation",[],async()=>{kn(J.FORMA_BUILDINGS,(o,a)=>{a||(a={}),Dn({formitGeometry:o,proposalId:r,projectId:t,polygonData:a,objectId:0,callback:n})})})}async getElementsAndSaveCache(t,r){debugger;await bn(t.projectId,t.proposalId,r)}async fetchAndLoadElements(t,r,n,o){const a=await de.getProposalElement(n.proposalId,n.projectId);if(!a)return;const i=Object.values(a).find(u=>u.properties.category==="proposal"),s={[i.urn]:i};if(await rn()){let u=vn(i,n.projectId,s);await Promise.all(u).then(async()=>{wn(s,i,"",n.proposalId,t,r).then(()=>{o(n.proposalId)})})}}}const Fe=new Wn;class Bn extends B.Component{constructor(t){super(t),this.state={loggedIn:!1}}static login(){return Fe.accessSpacemaker(!1),null}render(){return m(he,{})}}class At{constructor(){ne(this,"id");ne(this,"urn");ne(this,"name");ne(this,"metadata");ne(this,"version");this.id="",this.urn="",this.name="",this.version="1",this.metadata=null}Fill(t,r,n,o,a){if(this.id=t,this.version=n,r===null||r===""){let i=t.split("prop_");this.name=`prop_${i[1].substring(0,2)}`}else this.name=r;this.urn=a,this.metadata=o}}var je={},Vn={get exports(){return je},set exports(e){je=e}},U={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K=typeof Symbol=="function"&&Symbol.for,Ct=K?Symbol.for("react.element"):60103,Pt=K?Symbol.for("react.portal"):60106,Ke=K?Symbol.for("react.fragment"):60107,qe=K?Symbol.for("react.strict_mode"):60108,Ze=K?Symbol.for("react.profiler"):60114,Qe=K?Symbol.for("react.provider"):60109,et=K?Symbol.for("react.context"):60110,Tt=K?Symbol.for("react.async_mode"):60111,tt=K?Symbol.for("react.concurrent_mode"):60111,rt=K?Symbol.for("react.forward_ref"):60112,nt=K?Symbol.for("react.suspense"):60113,zn=K?Symbol.for("react.suspense_list"):60120,ot=K?Symbol.for("react.memo"):60115,at=K?Symbol.for("react.lazy"):60116,Hn=K?Symbol.for("react.block"):60121,Yn=K?Symbol.for("react.fundamental"):60117,Xn=K?Symbol.for("react.responder"):60118,Jn=K?Symbol.for("react.scope"):60119;function ce(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Ct:switch(e=e.type,e){case Tt:case tt:case Ke:case Ze:case qe:case nt:return e;default:switch(e=e&&e.$$typeof,e){case et:case rt:case at:case ot:case Qe:return e;default:return t}}case Pt:return t}}}function dr(e){return ce(e)===tt}U.AsyncMode=Tt;U.ConcurrentMode=tt;U.ContextConsumer=et;U.ContextProvider=Qe;U.Element=Ct;U.ForwardRef=rt;U.Fragment=Ke;U.Lazy=at;U.Memo=ot;U.Portal=Pt;U.Profiler=Ze;U.StrictMode=qe;U.Suspense=nt;U.isAsyncMode=function(e){return dr(e)||ce(e)===Tt};U.isConcurrentMode=dr;U.isContextConsumer=function(e){return ce(e)===et};U.isContextProvider=function(e){return ce(e)===Qe};U.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ct};U.isForwardRef=function(e){return ce(e)===rt};U.isFragment=function(e){return ce(e)===Ke};U.isLazy=function(e){return ce(e)===at};U.isMemo=function(e){return ce(e)===ot};U.isPortal=function(e){return ce(e)===Pt};U.isProfiler=function(e){return ce(e)===Ze};U.isStrictMode=function(e){return ce(e)===qe};U.isSuspense=function(e){return ce(e)===nt};U.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ke||e===tt||e===Ze||e===qe||e===nt||e===zn||typeof e=="object"&&e!==null&&(e.$$typeof===at||e.$$typeof===ot||e.$$typeof===Qe||e.$$typeof===et||e.$$typeof===rt||e.$$typeof===Yn||e.$$typeof===Xn||e.$$typeof===Jn||e.$$typeof===Hn)};U.typeOf=ce;(function(e){e.exports=U})(Vn);function Kn(e){function t(I,g,w,E,c){for(var j=0,h=0,z=0,$=0,N,R,q=0,oe=0,M,re=M=N=0,D=0,Z=0,Ee=0,Q=0,Ne=w.length,Re=Ne-1,fe,O="",H="",it="",st="",ge;D<Ne;){if(R=w.charCodeAt(D),D===Re&&h+$+z+j!==0&&(h!==0&&(R=h===47?10:47),$=z=j=0,Ne++,Re++),h+$+z+j===0){if(D===Re&&(0<Z&&(O=O.replace(b,"")),0<O.trim().length)){switch(R){case 32:case 9:case 59:case 13:case 10:break;default:O+=w.charAt(D)}R=59}switch(R){case 123:for(O=O.trim(),N=O.charCodeAt(0),M=1,Q=++D;D<Ne;){switch(R=w.charCodeAt(D)){case 123:M++;break;case 125:M--;break;case 47:switch(R=w.charCodeAt(D+1)){case 42:case 47:e:{for(re=D+1;re<Re;++re)switch(w.charCodeAt(re)){case 47:if(R===42&&w.charCodeAt(re-1)===42&&D+2!==re){D=re+1;break e}break;case 10:if(R===47){D=re+1;break e}}D=re}}break;case 91:R++;case 40:R++;case 34:case 39:for(;D++<Re&&w.charCodeAt(D)!==R;);}if(M===0)break;D++}switch(M=w.substring(Q,D),N===0&&(N=(O=O.replace(p,"").trim()).charCodeAt(0)),N){case 64:switch(0<Z&&(O=O.replace(b,"")),R=O.charCodeAt(1),R){case 100:case 109:case 115:case 45:Z=g;break;default:Z=me}if(M=t(g,Z,M,R,c+1),Q=M.length,0<ue&&(Z=r(me,O,Ee),ge=s(3,M,Z,g,ie,Y,Q,R,c,E),O=Z.join(""),ge!==void 0&&(Q=(M=ge.trim()).length)===0&&(R=0,M="")),0<Q)switch(R){case 115:O=O.replace(P,i);case 100:case 109:case 45:M=O+"{"+M+"}";break;case 107:O=O.replace(S,"$1 $2"),M=O+"{"+M+"}",M=X===1||X===2&&a("@"+M,3)?"@-webkit-"+M+"@"+M:"@"+M;break;default:M=O+M,E===112&&(M=(H+=M,""))}else M="";break;default:M=t(g,r(g,O,Ee),M,E,c+1)}it+=M,M=Ee=Z=re=N=0,O="",R=w.charCodeAt(++D);break;case 125:case 59:if(O=(0<Z?O.replace(b,""):O).trim(),1<(Q=O.length))switch(re===0&&(N=O.charCodeAt(0),N===45||96<N&&123>N)&&(Q=(O=O.replace(" ",":")).length),0<ue&&(ge=s(1,O,g,I,ie,Y,H.length,E,c,E))!==void 0&&(Q=(O=ge.trim()).length)===0&&(O="\0\0"),N=O.charCodeAt(0),R=O.charCodeAt(1),N){case 0:break;case 64:if(R===105||R===99){st+=O+w.charAt(D);break}default:O.charCodeAt(Q-1)!==58&&(H+=o(O,N,R,O.charCodeAt(2)))}Ee=Z=re=N=0,O="",R=w.charCodeAt(++D)}}switch(R){case 13:case 10:h===47?h=0:1+N===0&&E!==107&&0<O.length&&(Z=1,O+="\0"),0<ue*be&&s(0,O,g,I,ie,Y,H.length,E,c,E),Y=1,ie++;break;case 59:case 125:if(h+$+z+j===0){Y++;break}default:switch(Y++,fe=w.charAt(D),R){case 9:case 32:if($+j+h===0)switch(q){case 44:case 58:case 9:case 32:fe="";break;default:R!==32&&(fe=" ")}break;case 0:fe="\\0";break;case 12:fe="\\f";break;case 11:fe="\\v";break;case 38:$+h+j===0&&(Z=Ee=1,fe="\f"+fe);break;case 108:if($+h+j+le===0&&0<re)switch(D-re){case 2:q===112&&w.charCodeAt(D-3)===58&&(le=q);case 8:oe===111&&(le=oe)}break;case 58:$+h+j===0&&(re=D);break;case 44:h+z+$+j===0&&(Z=1,fe+="\r");break;case 34:case 39:h===0&&($=$===R?0:$===0?R:$);break;case 91:$+h+z===0&&j++;break;case 93:$+h+z===0&&j--;break;case 41:$+h+j===0&&z--;break;case 40:if($+h+j===0){if(N===0)switch(2*q+3*oe){case 533:break;default:N=1}z++}break;case 64:h+z+$+j+re+M===0&&(M=1);break;case 42:case 47:if(!(0<$+j+z))switch(h){case 0:switch(2*R+3*w.charCodeAt(D+1)){case 235:h=47;break;case 220:Q=D,h=42}break;case 42:R===47&&q===42&&Q+2!==D&&(w.charCodeAt(Q+2)===33&&(H+=w.substring(Q,D+1)),fe="",h=0)}}h===0&&(O+=fe)}oe=q,q=R,D++}if(Q=H.length,0<Q){if(Z=g,0<ue&&(ge=s(2,H,Z,I,ie,Y,Q,E,c,E),ge!==void 0&&(H=ge).length===0))return st+H+it;if(H=Z.join(",")+"{"+H+"}",X*le!==0){switch(X!==2||a(H,2)||(le=0),le){case 111:H=H.replace(k,":-moz-$1")+H;break;case 112:H=H.replace(_,"::-webkit-input-$1")+H.replace(_,"::-moz-$1")+H.replace(_,":-ms-input-$1")+H}le=0}}return st+H+it}function r(I,g,w){var E=g.trim().split(d);g=E;var c=E.length,j=I.length;switch(j){case 0:case 1:var h=0;for(I=j===0?"":I[0]+" ";h<c;++h)g[h]=n(I,g[h],w).trim();break;default:var z=h=0;for(g=[];h<c;++h)for(var $=0;$<j;++$)g[z++]=n(I[$]+" ",E[h],w).trim()}return g}function n(I,g,w){var E=g.charCodeAt(0);switch(33>E&&(E=(g=g.trim()).charCodeAt(0)),E){case 38:return g.replace(x,"$1"+I.trim());case 58:return I.trim()+g.replace(x,"$1"+I.trim());default:if(0<1*w&&0<g.indexOf("\f"))return g.replace(x,(I.charCodeAt(0)===58?"":"$1")+I.trim())}return I+g}function o(I,g,w,E){var c=I+";",j=2*g+3*w+4*E;if(j===944){I=c.indexOf(":",9)+1;var h=c.substring(I,c.length-1).trim();return h=c.substring(0,I).trim()+h+";",X===1||X===2&&a(h,1)?"-webkit-"+h+h:h}if(X===0||X===2&&!a(c,1))return c;switch(j){case 1015:return c.charCodeAt(10)===97?"-webkit-"+c+c:c;case 951:return c.charCodeAt(3)===116?"-webkit-"+c+c:c;case 963:return c.charCodeAt(5)===110?"-webkit-"+c+c:c;case 1009:if(c.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+c+c;case 978:return"-webkit-"+c+"-moz-"+c+c;case 1019:case 983:return"-webkit-"+c+"-moz-"+c+"-ms-"+c+c;case 883:if(c.charCodeAt(8)===45)return"-webkit-"+c+c;if(0<c.indexOf("image-set(",11))return c.replace(te,"$1-webkit-$2")+c;break;case 932:if(c.charCodeAt(4)===45)switch(c.charCodeAt(5)){case 103:return"-webkit-box-"+c.replace("-grow","")+"-webkit-"+c+"-ms-"+c.replace("grow","positive")+c;case 115:return"-webkit-"+c+"-ms-"+c.replace("shrink","negative")+c;case 98:return"-webkit-"+c+"-ms-"+c.replace("basis","preferred-size")+c}return"-webkit-"+c+"-ms-"+c+c;case 964:return"-webkit-"+c+"-ms-flex-"+c+c;case 1023:if(c.charCodeAt(8)!==99)break;return h=c.substring(c.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+h+"-webkit-"+c+"-ms-flex-pack"+h+c;case 1005:return v.test(c)?c.replace(A,":-webkit-")+c.replace(A,":-moz-")+c:c;case 1e3:switch(h=c.substring(13).trim(),g=h.indexOf("-")+1,h.charCodeAt(0)+h.charCodeAt(g)){case 226:h=c.replace(L,"tb");break;case 232:h=c.replace(L,"tb-rl");break;case 220:h=c.replace(L,"lr");break;default:return c}return"-webkit-"+c+"-ms-"+h+c;case 1017:if(c.indexOf("sticky",9)===-1)break;case 975:switch(g=(c=I).length-10,h=(c.charCodeAt(g)===33?c.substring(0,g):c).substring(I.indexOf(":",7)+1).trim(),j=h.charCodeAt(0)+(h.charCodeAt(7)|0)){case 203:if(111>h.charCodeAt(8))break;case 115:c=c.replace(h,"-webkit-"+h)+";"+c;break;case 207:case 102:c=c.replace(h,"-webkit-"+(102<j?"inline-":"")+"box")+";"+c.replace(h,"-webkit-"+h)+";"+c.replace(h,"-ms-"+h+"box")+";"+c}return c+";";case 938:if(c.charCodeAt(5)===45)switch(c.charCodeAt(6)){case 105:return h=c.replace("-items",""),"-webkit-"+c+"-webkit-box-"+h+"-ms-flex-"+h+c;case 115:return"-webkit-"+c+"-ms-flex-item-"+c.replace(C,"")+c;default:return"-webkit-"+c+"-ms-flex-line-pack"+c.replace("align-content","").replace(C,"")+c}break;case 973:case 989:if(c.charCodeAt(3)!==45||c.charCodeAt(4)===122)break;case 931:case 953:if(W.test(I)===!0)return(h=I.substring(I.indexOf(":")+1)).charCodeAt(0)===115?o(I.replace("stretch","fill-available"),g,w,E).replace(":fill-available",":stretch"):c.replace(h,"-webkit-"+h)+c.replace(h,"-moz-"+h.replace("fill-",""))+c;break;case 962:if(c="-webkit-"+c+(c.charCodeAt(5)===102?"-ms-"+c:"")+c,w+E===211&&c.charCodeAt(13)===105&&0<c.indexOf("transform",10))return c.substring(0,c.indexOf(";",27)+1).replace(y,"$1-webkit-$2")+c}return c}function a(I,g){var w=I.indexOf(g===1?":":"{"),E=I.substring(0,g!==3?w:10);return w=I.substring(w+1,I.length-1),ke(g!==2?E:E.replace(F,"$1"),w,g)}function i(I,g){var w=o(g,g.charCodeAt(0),g.charCodeAt(1),g.charCodeAt(2));return w!==g+";"?w.replace(T," or ($1)").substring(4):"("+g+")"}function s(I,g,w,E,c,j,h,z,$,N){for(var R=0,q=g,oe;R<ue;++R)switch(oe=se[R].call(f,I,q,w,E,c,j,h,z,$,N)){case void 0:case!1:case!0:case null:break;default:q=oe}if(q!==g)return q}function l(I){switch(I){case void 0:case null:ue=se.length=0;break;default:if(typeof I=="function")se[ue++]=I;else if(typeof I=="object")for(var g=0,w=I.length;g<w;++g)l(I[g]);else be=!!I|0}return l}function u(I){return I=I.prefix,I!==void 0&&(ke=null,I?typeof I!="function"?X=1:(X=2,ke=I):X=0),u}function f(I,g){var w=I;if(33>w.charCodeAt(0)&&(w=w.trim()),Oe=w,w=[Oe],0<ue){var E=s(-1,g,w,w,ie,Y,0,0,0,0);E!==void 0&&typeof E=="string"&&(g=E)}var c=t(me,w,g,0,0);return 0<ue&&(E=s(-2,c,w,w,ie,Y,c.length,0,0,0),E!==void 0&&(c=E)),Oe="",le=0,Y=ie=1,c}var p=/^\0+/g,b=/[\0\r\f]/g,A=/: */g,v=/zoo|gra/,y=/([,: ])(transform)/g,d=/,\r+?/g,x=/([\t\r\n ])*\f?&/g,S=/@(k\w+)\s*(\S*)\s*/,_=/::(place)/g,k=/:(read-only)/g,L=/[svh]\w+-[tblr]{2}/,P=/\(\s*(.*)\s*\)/g,T=/([\s\S]*?);/g,C=/-self|flex-/g,F=/[^]*?(:[rp][el]a[\w-]+)[^]*/,W=/stretch|:\s*\w+\-(?:conte|avail)/,te=/([^-])(image-set\()/,Y=1,ie=1,le=0,X=1,me=[],se=[],ue=0,ke=null,be=0,Oe="";return f.use=l,f.set=u,e!==void 0&&u(e),f}var qn={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Zn(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Qn=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Bt=Zn(function(e){return Qn.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),kt=je,eo={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},to={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ro={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},fr={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ot={};Ot[kt.ForwardRef]=ro;Ot[kt.Memo]=fr;function Vt(e){return kt.isMemo(e)?fr:Ot[e.$$typeof]||eo}var no=Object.defineProperty,oo=Object.getOwnPropertyNames,zt=Object.getOwnPropertySymbols,ao=Object.getOwnPropertyDescriptor,io=Object.getPrototypeOf,Ht=Object.prototype;function pr(e,t,r){if(typeof t!="string"){if(Ht){var n=io(t);n&&n!==Ht&&pr(e,n,r)}var o=oo(t);zt&&(o=o.concat(zt(t)));for(var a=Vt(e),i=Vt(t),s=0;s<o.length;++s){var l=o[s];if(!to[l]&&!(r&&r[l])&&!(i&&i[l])&&!(a&&a[l])){var u=ao(t,l);try{no(e,l,u)}catch{}}}}return e}var so=pr;function pe(){return(pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Yt=function(e,t){for(var r=[e[0]],n=0,o=t.length;n<o;n+=1)r.push(t[n],e[n+1]);return r},gt=function(e){return e!==null&&typeof e=="object"&&(e.toString?e.toString():Object.prototype.toString.call(e))==="[object Object]"&&!je.typeOf(e)},Ye=Object.freeze([]),ye=Object.freeze({});function $e(e){return typeof e=="function"}function Xt(e){return e.displayName||e.name||"Component"}function Et(e){return e&&typeof e.styledComponentId=="string"}var Ce=typeof process<"u"&&{}!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",Rt=typeof window<"u"&&"HTMLElement"in window,co=Boolean(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&{}!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""?{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY:!1));function _e(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(r.length>0?" Args: "+r.join(", "):""))}var lo=function(){function e(r){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=r}var t=e.prototype;return t.indexOfGroup=function(r){for(var n=0,o=0;o<r;o++)n+=this.groupSizes[o];return n},t.insertRules=function(r,n){if(r>=this.groupSizes.length){for(var o=this.groupSizes,a=o.length,i=a;r>=i;)(i<<=1)<0&&_e(16,""+r);this.groupSizes=new Uint32Array(i),this.groupSizes.set(o),this.length=i;for(var s=a;s<i;s++)this.groupSizes[s]=0}for(var l=this.indexOfGroup(r+1),u=0,f=n.length;u<f;u++)this.tag.insertRule(l,n[u])&&(this.groupSizes[r]++,l++)},t.clearGroup=function(r){if(r<this.length){var n=this.groupSizes[r],o=this.indexOfGroup(r),a=o+n;this.groupSizes[r]=0;for(var i=o;i<a;i++)this.tag.deleteRule(o)}},t.getGroup=function(r){var n="";if(r>=this.length||this.groupSizes[r]===0)return n;for(var o=this.groupSizes[r],a=this.indexOfGroup(r),i=a+o,s=a;s<i;s++)n+=this.tag.getRule(s)+`/*!sc*/
`;return n},e}(),Ve=new Map,Xe=new Map,Me=1,Ge=function(e){if(Ve.has(e))return Ve.get(e);for(;Xe.has(Me);)Me++;var t=Me++;return Ve.set(e,t),Xe.set(t,e),t},uo=function(e){return Xe.get(e)},fo=function(e,t){t>=Me&&(Me=t+1),Ve.set(e,t),Xe.set(t,e)},po="style["+Ce+'][data-styled-version="5.3.9"]',ho=new RegExp("^"+Ce+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),mo=function(e,t,r){for(var n,o=r.split(","),a=0,i=o.length;a<i;a++)(n=o[a])&&e.registerName(t,n)},go=function(e,t){for(var r=(t.textContent||"").split(`/*!sc*/
`),n=[],o=0,a=r.length;o<a;o++){var i=r[o].trim();if(i){var s=i.match(ho);if(s){var l=0|parseInt(s[1],10),u=s[2];l!==0&&(fo(u,l),mo(e,u,s[3]),e.getTag().insertRules(l,n)),n.length=0}else n.push(i)}}},yo=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},hr=function(e){var t=document.head,r=e||t,n=document.createElement("style"),o=function(s){for(var l=s.childNodes,u=l.length;u>=0;u--){var f=l[u];if(f&&f.nodeType===1&&f.hasAttribute(Ce))return f}}(r),a=o!==void 0?o.nextSibling:null;n.setAttribute(Ce,"active"),n.setAttribute("data-styled-version","5.3.9");var i=yo();return i&&n.setAttribute("nonce",i),r.insertBefore(n,a),n},vo=function(){function e(r){var n=this.element=hr(r);n.appendChild(document.createTextNode("")),this.sheet=function(o){if(o.sheet)return o.sheet;for(var a=document.styleSheets,i=0,s=a.length;i<s;i++){var l=a[i];if(l.ownerNode===o)return l}_e(17)}(n),this.length=0}var t=e.prototype;return t.insertRule=function(r,n){try{return this.sheet.insertRule(n,r),this.length++,!0}catch{return!1}},t.deleteRule=function(r){this.sheet.deleteRule(r),this.length--},t.getRule=function(r){var n=this.sheet.cssRules[r];return n!==void 0&&typeof n.cssText=="string"?n.cssText:""},e}(),wo=function(){function e(r){var n=this.element=hr(r);this.nodes=n.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(r,n){if(r<=this.length&&r>=0){var o=document.createTextNode(n),a=this.nodes[r];return this.element.insertBefore(o,a||null),this.length++,!0}return!1},t.deleteRule=function(r){this.element.removeChild(this.nodes[r]),this.length--},t.getRule=function(r){return r<this.length?this.nodes[r].textContent:""},e}(),bo=function(){function e(r){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(r,n){return r<=this.length&&(this.rules.splice(r,0,n),this.length++,!0)},t.deleteRule=function(r){this.rules.splice(r,1),this.length--},t.getRule=function(r){return r<this.length?this.rules[r]:""},e}(),Jt=Rt,So={isServer:!Rt,useCSSOMInjection:!co},mr=function(){function e(r,n,o){r===void 0&&(r=ye),n===void 0&&(n={}),this.options=pe({},So,{},r),this.gs=n,this.names=new Map(o),this.server=!!r.isServer,!this.server&&Rt&&Jt&&(Jt=!1,function(a){for(var i=document.querySelectorAll(po),s=0,l=i.length;s<l;s++){var u=i[s];u&&u.getAttribute(Ce)!=="active"&&(go(a,u),u.parentNode&&u.parentNode.removeChild(u))}}(this))}e.registerId=function(r){return Ge(r)};var t=e.prototype;return t.reconstructWithOptions=function(r,n){return n===void 0&&(n=!0),new e(pe({},this.options,{},r),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(r){return this.gs[r]=(this.gs[r]||0)+1},t.getTag=function(){return this.tag||(this.tag=(o=(n=this.options).isServer,a=n.useCSSOMInjection,i=n.target,r=o?new bo(i):a?new vo(i):new wo(i),new lo(r)));var r,n,o,a,i},t.hasNameForId=function(r,n){return this.names.has(r)&&this.names.get(r).has(n)},t.registerName=function(r,n){if(Ge(r),this.names.has(r))this.names.get(r).add(n);else{var o=new Set;o.add(n),this.names.set(r,o)}},t.insertRules=function(r,n,o){this.registerName(r,n),this.getTag().insertRules(Ge(r),o)},t.clearNames=function(r){this.names.has(r)&&this.names.get(r).clear()},t.clearRules=function(r){this.getTag().clearGroup(Ge(r)),this.clearNames(r)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(r){for(var n=r.getTag(),o=n.length,a="",i=0;i<o;i++){var s=uo(i);if(s!==void 0){var l=r.names.get(s),u=n.getGroup(i);if(l&&u&&l.size){var f=Ce+".g"+i+'[id="'+s+'"]',p="";l!==void 0&&l.forEach(function(b){b.length>0&&(p+=b+",")}),a+=""+u+f+'{content:"'+p+`"}/*!sc*/
`}}}return a}(this)},e}(),Io=/(a)(d)/gi,Kt=function(e){return String.fromCharCode(e+(e>25?39:97))};function yt(e){var t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=Kt(t%52)+r;return(Kt(t%52)+r).replace(Io,"$1-$2")}var Ie=function(e,t){for(var r=t.length;r;)e=33*e^t.charCodeAt(--r);return e},gr=function(e){return Ie(5381,e)};function xo(e){for(var t=0;t<e.length;t+=1){var r=e[t];if($e(r)&&!Et(r))return!1}return!0}var Ao=gr("5.3.9"),Co=function(){function e(t,r,n){this.rules=t,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&xo(t),this.componentId=r,this.baseHash=Ie(Ao,r),this.baseStyle=n,mr.registerId(r)}return e.prototype.generateAndInjectStyles=function(t,r,n){var o=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(t,r,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&r.hasNameForId(o,this.staticRulesId))a.push(this.staticRulesId);else{var i=Pe(this.rules,t,r,n).join(""),s=yt(Ie(this.baseHash,i)>>>0);if(!r.hasNameForId(o,s)){var l=n(i,"."+s,void 0,o);r.insertRules(o,s,l)}a.push(s),this.staticRulesId=s}else{for(var u=this.rules.length,f=Ie(this.baseHash,n.hash),p="",b=0;b<u;b++){var A=this.rules[b];if(typeof A=="string")p+=A;else if(A){var v=Pe(A,t,r,n),y=Array.isArray(v)?v.join(""):v;f=Ie(f,y+b),p+=y}}if(p){var d=yt(f>>>0);if(!r.hasNameForId(o,d)){var x=n(p,"."+d,void 0,o);r.insertRules(o,d,x)}a.push(d)}}return a.join(" ")},e}(),Po=/^\s*\/\/.*$/gm,To=[":","[",".","#"];function ko(e){var t,r,n,o,a=e===void 0?ye:e,i=a.options,s=i===void 0?ye:i,l=a.plugins,u=l===void 0?Ye:l,f=new Kn(s),p=[],b=function(y){function d(x){if(x)try{y(x+"}")}catch{}}return function(x,S,_,k,L,P,T,C,F,W){switch(x){case 1:if(F===0&&S.charCodeAt(0)===64)return y(S+";"),"";break;case 2:if(C===0)return S+"/*|*/";break;case 3:switch(C){case 102:case 112:return y(_[0]+S),"";default:return S+(W===0?"/*|*/":"")}case-2:S.split("/*|*/}").forEach(d)}}}(function(y){p.push(y)}),A=function(y,d,x){return d===0&&To.indexOf(x[r.length])!==-1||x.match(o)?y:"."+t};function v(y,d,x,S){S===void 0&&(S="&");var _=y.replace(Po,""),k=d&&x?x+" "+d+" { "+_+" }":_;return t=S,r=d,n=new RegExp("\\"+r+"\\b","g"),o=new RegExp("(\\"+r+"\\b){2,}"),f(x||!d?"":d,k)}return f.use([].concat(u,[function(y,d,x){y===2&&x.length&&x[0].lastIndexOf(r)>0&&(x[0]=x[0].replace(n,A))},b,function(y){if(y===-2){var d=p;return p=[],d}}])),v.hash=u.length?u.reduce(function(y,d){return d.name||_e(15),Ie(y,d.name)},5381).toString():"",v}var yr=Je.createContext();yr.Consumer;var vr=Je.createContext(),Oo=(vr.Consumer,new mr),vt=ko();function Eo(){return B.useContext(yr)||Oo}function Ro(){return B.useContext(vr)||vt}var Fo=function(){function e(t,r){var n=this;this.inject=function(o,a){a===void 0&&(a=vt);var i=n.name+a.hash;o.hasNameForId(n.id,i)||o.insertRules(n.id,i,a(n.rules,i,"@keyframes"))},this.toString=function(){return _e(12,String(n.name))},this.name=t,this.id="sc-keyframes-"+t,this.rules=r}return e.prototype.getName=function(t){return t===void 0&&(t=vt),this.name+t.hash},e}(),Mo=/([A-Z])/,Lo=/([A-Z])/g,jo=/^ms-/,$o=function(e){return"-"+e.toLowerCase()};function qt(e){return Mo.test(e)?e.replace(Lo,$o).replace(jo,"-ms-"):e}var Zt=function(e){return e==null||e===!1||e===""};function Pe(e,t,r,n){if(Array.isArray(e)){for(var o,a=[],i=0,s=e.length;i<s;i+=1)(o=Pe(e[i],t,r,n))!==""&&(Array.isArray(o)?a.push.apply(a,o):a.push(o));return a}if(Zt(e))return"";if(Et(e))return"."+e.styledComponentId;if($e(e)){if(typeof(u=e)!="function"||u.prototype&&u.prototype.isReactComponent||!t)return e;var l=e(t);return Pe(l,t,r,n)}var u;return e instanceof Fo?r?(e.inject(r,n),e.getName(n)):e:gt(e)?function f(p,b){var A,v,y=[];for(var d in p)p.hasOwnProperty(d)&&!Zt(p[d])&&(Array.isArray(p[d])&&p[d].isCss||$e(p[d])?y.push(qt(d)+":",p[d],";"):gt(p[d])?y.push.apply(y,f(p[d],d)):y.push(qt(d)+": "+(A=d,(v=p[d])==null||typeof v=="boolean"||v===""?"":typeof v!="number"||v===0||A in qn?String(v).trim():v+"px")+";"));return b?[b+" {"].concat(y,["}"]):y}(e):e.toString()}var Qt=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function Do(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return $e(e)||gt(e)?Qt(Pe(Yt(Ye,[e].concat(r)))):r.length===0&&e.length===1&&typeof e[0]=="string"?e:Qt(Pe(Yt(e,r)))}var _o=function(e,t,r){return r===void 0&&(r=ye),e.theme!==r.theme&&e.theme||t||r.theme},No=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Uo=/(^-|-$)/g;function dt(e){return e.replace(No,"-").replace(Uo,"")}var Go=function(e){return yt(gr(e)>>>0)};function We(e){return typeof e=="string"&&!0}var wt=function(e){return typeof e=="function"||typeof e=="object"&&e!==null&&!Array.isArray(e)},Wo=function(e){return e!=="__proto__"&&e!=="constructor"&&e!=="prototype"};function Bo(e,t,r){var n=e[r];wt(t)&&wt(n)?wr(n,t):e[r]=t}function wr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var o=0,a=r;o<a.length;o++){var i=a[o];if(wt(i))for(var s in i)Wo(s)&&Bo(e,i[s],s)}return e}var br=Je.createContext();br.Consumer;var ft={};function Sr(e,t,r){var n=Et(e),o=!We(e),a=t.attrs,i=a===void 0?Ye:a,s=t.componentId,l=s===void 0?function(S,_){var k=typeof S!="string"?"sc":dt(S);ft[k]=(ft[k]||0)+1;var L=k+"-"+Go("5.3.9"+k+ft[k]);return _?_+"-"+L:L}(t.displayName,t.parentComponentId):s,u=t.displayName,f=u===void 0?function(S){return We(S)?"styled."+S:"Styled("+Xt(S)+")"}(e):u,p=t.displayName&&t.componentId?dt(t.displayName)+"-"+t.componentId:t.componentId||l,b=n&&e.attrs?Array.prototype.concat(e.attrs,i).filter(Boolean):i,A=t.shouldForwardProp;n&&e.shouldForwardProp&&(A=t.shouldForwardProp?function(S,_,k){return e.shouldForwardProp(S,_,k)&&t.shouldForwardProp(S,_,k)}:e.shouldForwardProp);var v,y=new Co(r,p,n?e.componentStyle:void 0),d=y.isStatic&&i.length===0,x=function(S,_){return function(k,L,P,T){var C=k.attrs,F=k.componentStyle,W=k.defaultProps,te=k.foldedComponentIds,Y=k.shouldForwardProp,ie=k.styledComponentId,le=k.target,X=function(E,c,j){E===void 0&&(E=ye);var h=pe({},c,{theme:E}),z={};return j.forEach(function($){var N,R,q,oe=$;for(N in $e(oe)&&(oe=oe(h)),oe)h[N]=z[N]=N==="className"?(R=z[N],q=oe[N],R&&q?R+" "+q:R||q):oe[N]}),[h,z]}(_o(L,B.useContext(br),W)||ye,L,C),me=X[0],se=X[1],ue=function(E,c,j,h){var z=Eo(),$=Ro(),N=c?E.generateAndInjectStyles(ye,z,$):E.generateAndInjectStyles(j,z,$);return N}(F,T,me),ke=P,be=se.$as||L.$as||se.as||L.as||le,Oe=We(be),I=se!==L?pe({},L,{},se):L,g={};for(var w in I)w[0]!=="$"&&w!=="as"&&(w==="forwardedAs"?g.as=I[w]:(Y?Y(w,Bt,be):!Oe||Bt(w))&&(g[w]=I[w]));return L.style&&se.style!==L.style&&(g.style=pe({},L.style,{},se.style)),g.className=Array.prototype.concat(te,ie,ue!==ie?ue:null,L.className,se.className).filter(Boolean).join(" "),g.ref=ke,B.createElement(be,g)}(v,S,_,d)};return x.displayName=f,(v=Je.forwardRef(x)).attrs=b,v.componentStyle=y,v.displayName=f,v.shouldForwardProp=A,v.foldedComponentIds=n?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):Ye,v.styledComponentId=p,v.target=n?e.target:e,v.withComponent=function(S){var _=t.componentId,k=function(P,T){if(P==null)return{};var C,F,W={},te=Object.keys(P);for(F=0;F<te.length;F++)C=te[F],T.indexOf(C)>=0||(W[C]=P[C]);return W}(t,["componentId"]),L=_&&_+"-"+(We(S)?S:dt(Xt(S)));return Sr(S,pe({},k,{attrs:b,componentId:L}),r)},Object.defineProperty(v,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(S){this._foldedDefaultProps=n?wr({},e.defaultProps,S):S}}),Object.defineProperty(v,"toString",{value:function(){return"."+v.styledComponentId}}),o&&so(v,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),v}var bt=function(e){return function t(r,n,o){if(o===void 0&&(o=ye),!je.isValidElementType(n))return _e(1,String(n));var a=function(){return r(n,o,Do.apply(void 0,arguments))};return a.withConfig=function(i){return t(r,n,pe({},o,{},i))},a.attrs=function(i){return t(r,n,pe({},o,{attrs:Array.prototype.concat(o.attrs,i).filter(Boolean)}))},a}(Sr,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(e){bt[e]=bt(e)});const G=bt,Vo=G.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 255px;
    overflow: hidden;
`,zo=G.div`
    position: relative;
    text-decoration: none;
    display: block;
`,Ho=G.div`
    width: 175px;
    min-height: 158px;
    border-radius: 4px;
    padding: 5px 5px 5px 5px;
    margin: 0rem 1.0rem .5rem 2.0rem;
    opacity: 1;
    background-color: 1;
    transition: box-shadow 100ms linear 0s;
`,er=G.div`
    display: flex;
`,Yo=G.div`
    display: flex;
    flex-direction: column;
    margin: 0px 5px 0px 0px;
`,Xo=G.span`
    font-family: Inter;
    font-size: 12px;
    font-weight: 600;
    line-height: 20px;
    letter-spacing: -0.006em;
    color: rgb(42, 51, 61)
`,Jo=G.span`
    font-family: Inter;
    font-size: 10px;
    line-height: 16px;
    color: rgb(91, 102, 113)
`,Ko=G.div`
    custor: pointer;
    height: 115px;
    width: 115px;
    border-radius: 4px;
    background-size: cover;
    background-color: white;
    background-position: center center;
    overflow: hidden;
`,qo=G.div`
    transition: opacity 100ms linear 0s;
    overflow: hidden;
    background-color: rgb(226, 226, 226);
    display: flex;
    -webkit-box-align: center;
    align-items: center;
    -webkit-box-pack: center;
    justify-content: center;
    height: 100%;
    width: 100%;
`,Zo=G.div`
    display: flex;
    flex-direction: column;
    margin: 0rem .1rem 0rem .4rem;
    padding: 0px .2em 0px .5em;
    border: 1.5px solid rgb(233, 234, 236);
    border-radius: 4px;
    align-items: center;
    justify-content: center;
`;G.div`
    height: 80px;
    width: 80px;
    display: flex;
    justify-content: space-evenly;
    -webkit-box-align: center;
    align-items: center;
    flex-direction: column;
    margin-bottom: 10px;
`;const Qo=G.div`
    margin-top: 6px;
`,ea=G.div`
    font-family: Inter;
    font-size: 12px;
    font-weight: 550;
    color: rgb(42, 51, 61);
    line-height: 24px;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
    text-align: left;
`,ta=G.div`
    position: relative;
    width: fit-content;
    text-align: left;
`,ra=G.div`
    position: relative;
    font-family: Inter;
    font-size: 10px;
    line-height: 16px;
    color: rgb(115, 127, 140);
    margin-top: -2px;
    min-height: 16px;
    width: fit-content;
    overflow: visible;
    text-align: left;
`,na=G.div`
    display: flex;
    flex-direction: column;
    flex-row: row wrap;
    overflow: visible;
    align-items: center;
`,oa=G.div`
    position: relative;
    text-decoration: none;
    display: block;
`,aa=G.div`
    width: 175px;
    border-radius: 4px;
    padding: 5px 5px 5px 5px;
    margin: 0rem 1.0rem .5rem 2.0rem;
    opacity: 1;
    background-color: 1;
    transition: box-shadow 100ms linear 0s;
    overflow-y: auto;
`,tr=G.div`
    display: flex;
`,ia=G.div`
    display: flex;
    flex-direction: column;
    margin: 0px 5px 0px 0px;
`,sa=G.div`
    custor: pointer;
    height: 56px;
    width: 56px;
    border-radius: 4px;
    background-size: cover;
    background-color: white;
    background-position: center center;
    overflow: hidden;
`,ca=G.div`
    transition: opacity 100ms linear 0s;
    overflow: hidden;
    background-color: rgb(226, 226, 226);
    display: flex;
    -webkit-box-align: center;
    align-items: center;
    -webkit-box-pack: center;
    justify-content: center;
    height: 100%;
    width: 100%;
`,la=G.div`
    display: flex;
    flex-direction: column;
    margin: 0rem .1rem 0rem .4rem;
    padding: 0px .2em 0px .5em;
    border-radius: 4px;
    align-items: center;
    justify-content: center;
`;G.div`
    height: 80px;
    width: 80px;
    display: flex;
    justify-content: space-evenly;
    -webkit-box-align: center;
    align-items: center;
    flex-direction: column;
    margin-bottom: 10px;
`;G.div`
    margin-top: 6px;
`;const ua=G.div`
    font-family: Inter;
    font-size: 12px;
    font-weight: 550;
    color: rgb(42, 51, 61);
    line-height: 24px;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
    text-align: left;
`,da=G.div`
    position: relative;
    width: fit-content;
    text-align: left;
`,fa=G.div`
    position: relative;
    font-family: Inter;
    font-size: 10px;
    line-height: 16px;
    color: rgb(115, 127, 140);
    margin-top: -2px;
    min-height: 16px;
    width: fit-content;
    overflow: visible;
    text-align: left;
`;function pa(e){const{proposal:t,proposalSelectionHandler:r,isSelected:n}=e,o=de.FormatThumbnailUrl(t.projectId,t.urn);return m(he,{children:m(oa,{onClick:()=>{r(t.id)},children:m(aa,{id:t.proposalId,className:n?"proposal selected":"proposal",children:ae(tr,{className:"infos",children:[m(sa,{children:m(ca,{children:m("img",{alt:"Site Preview",src:o,width:"56",height:"56"})})}),m(la,{children:m(tr,{children:ae(ia,{children:[m(ua,{children:t.name}),m(da,{children:m(fa,{children:t.creationDate})})]})})})]})})})})}function ha(e){const{proposals:t,proposalSelectionHandler:r,selectedProposalId:n}=e;return t?m(he,{children:m("div",{"data-checkly":"ProposalList",children:m(na,{children:t==null?void 0:t.map(o=>m(pa,{proposal:o,proposalSelectionHandler:r,isSelected:o.proposalId===n},o.proposalId))})})}):m(he,{children:m("div",{"data-checkly":"ProposalList"})})}function ma(e){const{project:t,projectSelectionHandler:r,proposalSelectionHandler:n,isSelected:o,selectedProposalId:a}=e,i=de.FormatThumbnailUrl(t.projectId,t.urn);return ae(he,{children:[m(zo,{onClick:()=>{r(t.id)},children:ae(Ho,{id:t.projectId,className:o?"project selected":"project",children:[ae(er,{className:"infos",children:[m(Ko,{children:m(qo,{children:m("img",{alt:"Site Preview",src:i,width:"115",height:"115"})})}),m(Zo,{children:m(er,{children:ae(Yo,{children:[m(Xo,{children:t.proposalCount}),m(Jo,{children:"Proposals"})]})})})]}),ae(Qo,{children:[m(ea,{children:t.name}),m(ta,{children:m(ra,{children:t.creationTime})})]})]})}),m("div",{id:t.proposalsListContainer,className:o?"proposal-visible":"proposal-hidden",children:m(ha,{proposals:t.proposals,proposalSelectionHandler:n,selectedProposalId:a})})]})}function ga(e){const{projects:t,projectSelectionHandler:r,proposalSelectionHandler:n,selectedProjectId:o,selectedProposalId:a}=e;if(!t)return m(he,{children:m("div",{"data-checkly":"ProjectList"})});function i(l){document.querySelectorAll(".project.selected").forEach(p=>{p.classList.remove("selected")}),document.querySelectorAll(".proposal-visible").forEach(p=>{p.classList.remove("proposal-visible"),p.classList.add("proposal-hidden")}),s(""),r(l)}function s(l){document.querySelectorAll(".proposal.selected").forEach(f=>{f.classList.remove("selected")}),n(l)}return m(he,{children:m("div",{id:"projectlist-container","data-checkly":"ProjectList",children:m(Vo,{children:t==null?void 0:t.map(l=>m(ma,{project:l,projectSelectionHandler:i,proposalSelectionHandler:s,isSelected:l.projectId===o,selectedProposalId:a},l.projectId))})})})}class ya extends At{constructor(){super(...arguments);ne(this,"projectId");ne(this,"newestProposalId");ne(this,"creationTime");ne(this,"proposalCount");ne(this,"proposals");ne(this,"proposalsListContainer")}Fill(r,n,o,a){super.Fill(r,n,o,a,""),this.projectId=this.id,this.newestProposalId="",this.creationTime="",this.proposalCount=0}}class va extends At{constructor(){super(...arguments);ne(this,"proposalId");ne(this,"projectId");ne(this,"creationDate")}Fill(r,n,o,a,i){super.Fill(r,n,o,a,i),this.proposalId=this.id,this.creationDate=""}}function wa(){function e(P,T){P.then(T).catch(C=>console.log(C))}function t(P){try{let T=P!==null&&P.length>0;if(document.getElementById("message").style.display=T?"block":"none",T){A("info"),p("");let C=P.map(F=>{var W=new At;return W.Fill(F.id,F.name,F.version,F.metadata,F.urn),W});y(C),C.length>0&&o(C[0].id)}}catch{const C="Unable to read workspaces";throw A("error"),p(C),new Error(C)}}async function r(P){try{let T=P.filter(C=>C.metadata!==null&&!C.metadata.isDraft&&C.version!==1).map(C=>{var F=new ya;F.Fill(C.id,C.name,C.version,C.metadata);let te=new Date().getTime()-C.created,Y=Math.floor(te/(1e3*24*60*60));return F.creationTime=Y==0?"Today":`${Y} days ago`,F});await n(T),A("info"),p("")}catch{const C="Unable to read projects from selected workspace";throw A("error"),p(C),new Error(C)}}async function n(P){try{A("info"),p("Fetching proposals...");for(const T of P)await de.getProposals(T.projectId).then(C=>{T.proposals=C.map(F=>{var W=new va;const te=F.urn.split(":");let Y=te[te.length-2],ie=te[te.length-1],le=F.properties.name;W.Fill(Y,le,ie,F.metadata,F.urn);let X=new Date(F.metadata.createdAt),me=X.getHours(),se=X.getMinutes();return X.getDate()===new Date().getDate()?W.creationDate=`Today ${me}:${se} ${me<12?"AM":"PM"}`:W.creationDate=`${X.toLocaleString()}`,W.projectId=T.projectId,W}),T.proposals.sort(function(F,W){return new Date(F.metadata.createdAt).getTime()-new Date(W.metadata.createdAt).getTime()}),T.proposals.length>0&&(T.newestProposalId=T.proposals[0].id,T.urn=T.proposals[0].urn,T.proposalCount=T.proposals.length),T.proposalsListContainer=`project-${T.projectId}-proposals-list`});_(P),A("info"),p("")}catch{const C="Unable to read proposals from projects";throw A("error"),p(C),new Error(C)}}function o(P){A("info"),p("Fetching projects..."),e(de.getProjects(P),r.bind(this))}function a(){let P=document.getElementById("workspace-select");P!==null&&o(P.value)}async function i(P){if(d!==null&&(d==null?void 0:d.projectId)===P)x(null);else{let T=S==null?void 0:S.filter(C=>C.projectId==P);x(T!==null?T[0]:null)}}async function s(P){if(k!==null&&(k==null?void 0:k.proposalId)===P)L(null);else if(d!==null){let te=d.proposals.filter(Y=>Y.proposalId==P);L(te!==null?te[0]:null)}else L(null);const T=await FormIt.Model.IsModified(),C=d!==null&&(d==null?void 0:d.projectId)!==""&&P!=="";let F=document.getElementById("sync-btn"),W=document.getElementById("load-btn");F!==null&&(F.disabled=!T||!C),W!==null&&(W.disabled=!C)}function l(){let P=document.getElementById("projectlist-container");P.classList.add("disabled");let T=document.getElementById("message");T.className="info",T.textContent="Loading datas from Forma...";debugger;Fe.getElementsAndSaveCache(k,async()=>{Fe.fetchAndLoadElements(void 0,[],k,C=>{A(C?"success":"error"),p(C?"Datas have been synchronized successfully on Forma":"Synchronization failed"),P.classList.remove("disabled"),this.enableSyncFunction(k.proposalId)})})}function u(){let P=document.getElementById("projectlist-container");P.classList.add("disabled");let T=document.getElementById("message");T.className="info",T.textContent="Sending datas to Forma...";let C=d.projectId,F=k.proposalId;Fe.save({projectId:C,proposalId:F},W=>{A(W?"success":"error"),p(W?"Datas have been synchronized successfully on Forma":"Synchronization failed"),P.classList.remove("disabled")})}const[f,p]=B.useState(""),[b,A]=B.useState("info"),[v,y]=B.useState(),[d,x]=B.useState(null),[S,_]=B.useState(),[k,L]=B.useState(null);return B.useEffect(()=>{p("Fetching worskpaces..."),e(de.getWorkspaces(),t.bind(this));let P=document.getElementById("sync-btn");P!==null&&(P.disabled=!0);let T=document.getElementById("load-btn");T!==null&&(T.disabled=!0)},[]),m("div",{id:"FormaControls",className:"col-md-12",children:ae("div",{className:"plugin plugin-container",children:[m("h3",{id:"identifier",children:"Welcome to Formit-Forma plugin"}),m("select",{id:"workspace-select",className:"fetchSelect",onChange:a.bind(this),defaultValue:"",hidden:!0,children:v==null?void 0:v.map(({id:P,name:T})=>m("option",{value:P,children:T},P))}),m(ga,{projects:S,projectSelectionHandler:i,proposalSelectionHandler:s,selectedProjectId:d==null?void 0:d.projectId,selectedProposalId:k==null?void 0:k.proposalId}),ae("div",{id:"action",children:[m("button",{className:"st",id:"load-btn",onClick:l,children:"Load"}),m("button",{className:"st",id:"clear-btn",disabled:!0,children:"Clear"}),m("button",{className:"st",id:"sync-btn",onClick:u,children:"Sync"}),m("label",{id:"message",className:b,children:f})]})]})})}function ba(){let e=window.location.href.indexOf("loggedIn=1")>-1,t=Fe.getCookie("ajs_user_id"),r=null;return e=e||t!==null,e?r=m(wa,{}):r=ae("div",{id:"LoginControls",className:"",children:[m("h4",{children:"Start plugin to select a project"}),ae("button",{id:"LoginButton",className:"button is-link",onClick:Bn.login,children:[m("span",{children:"Start plugin"}),m("i",{className:"fab fa-github fa-lg"})]})]}),{loggedIn:e,node:r}}function Sa(){const[e,t]=B.useState(!1),[r,n]=B.useState(m(he,{}));return B.useEffect(()=>{let o=ba();o!==null&&(t(o.loggedIn),n(o.node))},[]),m("div",{id:"PluginWrapper",children:ae("div",{id:"PluginContainer",children:[m("h1",{className:"title",children:"Formit-Forma"}),m("h3",{className:"title",children:"Send data between FormIt and Forma"}),m("div",{id:"AppControls",children:m("div",{className:"container mt-3",children:m("div",{id:"app",children:r})})}),ae("div",{id:"NoAccess",hidden:!0,children:[m("div",{children:m("div",{className:"alertIcon"})}),ae("div",{children:["It looks like your web browser is in private or incognito mode. Formit-Forma plugin needs to save data to the local storage, so it can only be used in standard browsing mode.",m("br",{}),m("br",{}),"To use Formit-Forma Plugin, please switch to standard browsing mode."]})]})]})})}const Ia=Ar.createRoot(document.getElementById("root"));Ia.render(m(he,{children:m("div",{id:"MainControls",children:m(zr,{children:m(Sa,{})})})}));
