var br=Object.defineProperty;var Sr=(e,t,r)=>t in e?br(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var re=(e,t,r)=>(Sr(e,typeof t!="symbol"?t+"":t,r),r);import{R as dt,r as B,j as m,F as pe,a as Ye,b as oe,c as Ir}from"./index-6a0ed8c7.js";/**
 * @remix-run/router v1.3.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ge(){return Ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ge.apply(this,arguments)}var ye;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ye||(ye={}));const Ot="popstate";function xr(e){e===void 0&&(e={});function t(o,a){let{pathname:i="/",search:c="",hash:u=""}=wt(o.location.hash.substr(1));return ft("",{pathname:i,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(o,a){let i=o.document.querySelector("base"),c="";if(i&&i.getAttribute("href")){let u=o.location.href,l=u.indexOf("#");c=l===-1?u:u.slice(0,l)}return c+"#"+(typeof a=="string"?a:tr(a))}function n(o,a){Cr(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return Pr(t,r,n,e)}function er(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Cr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ar(){return Math.random().toString(36).substr(2,8)}function Rt(e,t){return{usr:e.state,key:e.key,idx:t}}function ft(e,t,r,n){return r===void 0&&(r=null),Ge({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?wt(t):t,{state:r,key:t&&t.key||n||Ar()})}function tr(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function wt(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Pr(e,t,r,n){n===void 0&&(n={});let{window:o=document.defaultView,v5Compat:a=!1}=n,i=o.history,c=ye.Pop,u=null,l=p();l==null&&(l=0,i.replaceState(Ge({},i.state,{idx:l}),""));function p(){return(i.state||{idx:null}).idx}function h(){c=ye.Pop;let d=p(),I=d==null?null:d-l;l=d,u&&u({action:c,location:y.location,delta:I})}function C(d,I){c=ye.Push;let b=ft(y.location,d,I);r&&r(b,d),l=p()+1;let _=Rt(b,l),T=y.createHref(b);try{i.pushState(_,"",T)}catch{o.location.assign(T)}a&&u&&u({action:c,location:y.location,delta:1})}function x(d,I){c=ye.Replace;let b=ft(y.location,d,I);r&&r(b,d),l=p();let _=Rt(b,l),T=y.createHref(b);i.replaceState(_,"",T),a&&u&&u({action:c,location:y.location,delta:0})}function v(d){let I=o.location.origin!=="null"?o.location.origin:o.location.href,b=typeof d=="string"?d:tr(d);return er(I,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,I)}let y={get action(){return c},get location(){return e(o,i)},listen(d){if(u)throw new Error("A history only accepts one active listener");return o.addEventListener(Ot,h),u=d,()=>{o.removeEventListener(Ot,h),u=null}},createHref(d){return t(o,d)},createURL:v,encodeLocation(d){let I=v(d);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:C,replace:x,go(d){return i.go(d)}};return y}var Lt;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Lt||(Lt={}));function kr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const Tr=["post","put","patch","delete"];[...Tr];/**
 * React Router v6.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Er(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const Or=typeof Object.is=="function"?Object.is:Er,{useState:Rr,useEffect:Lr,useLayoutEffect:jr,useDebugValue:Mr}=dt;function Fr(e,t,r){const n=t(),[{inst:o},a]=Rr({inst:{value:n,getSnapshot:t}});return jr(()=>{o.value=n,o.getSnapshot=t,it(o)&&a({inst:o})},[e,n,t]),Lr(()=>(it(o)&&a({inst:o}),e(()=>{it(o)&&a({inst:o})})),[e]),Mr(n),n}function it(e){const t=e.getSnapshot,r=e.value;try{const n=t();return!Or(r,n)}catch{return!0}}function $r(e,t,r){return t()}const Dr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_r=!Dr,Nr=_r?$r:Fr;"useSyncExternalStore"in dt&&(e=>e.useSyncExternalStore)(dt);const Ur=B.createContext(null),rr=B.createContext(null);function Wr(){return B.useContext(rr)!=null}var jt;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(jt||(jt={}));var Mt;(function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(Mt||(Mt={}));function Gr(e){let{basename:t="/",children:r=null,location:n,navigationType:o=ye.Pop,navigator:a,static:i=!1}=e;Wr()&&er(!1);let c=t.replace(/^\/*/,"/"),u=B.useMemo(()=>({basename:c,navigator:a,static:i}),[c,a,i]);typeof n=="string"&&(n=wt(n));let{pathname:l="/",search:p="",hash:h="",state:C=null,key:x="default"}=n,v=B.useMemo(()=>{let y=kr(l,c);return y==null?null:{pathname:y,search:p,hash:h,state:C,key:x}},[c,l,p,h,C,x]);return v==null?null:B.createElement(Ur.Provider,{value:u},B.createElement(rr.Provider,{children:r,value:{location:v,navigationType:o}}))}var Ft;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(Ft||(Ft={}));new Promise(()=>{});/**
 * React Router DOM v6.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Br(e){let{basename:t,children:r,window:n}=e,o=B.useRef();o.current==null&&(o.current=xr({window:n,v5Compat:!0}));let a=o.current,[i,c]=B.useState({action:a.action,location:a.location});return B.useLayoutEffect(()=>a.listen(c),[a]),B.createElement(Gr,{basename:t,children:r,location:i.location,navigationType:i.action,navigator:a})}var $t;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})($t||($t={}));var Dt;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Dt||(Dt={}));const z=0,Se=3.2808399,zr="root",Be={FORMA_CONTEXT:"Forma Context",FORMA_TERRAIN:"Forma Terrain",SURROUNDING_BUILDINGS:"Surrounding Buildings",FORMA_PROPOSAL_BUILDINGS:"Forma Proposal Buildings",FORMA_AUTO_BUILDINGS:"Forma Auto Buildings",FORMA_BUILDINGS:"Forma Buildings",FORMA_SITE_LIMIT:"site_limit",FORMA_BUILDING:"building",FORMA_VEGETATION:"vegetation",FORMA_GENERIC:"generic",FORMA_ROAD:"road",FORMA_RAILS:"rails",FORMA_PROPERTY_BOUNDARY:"property_boundary",FORMA_ZONE:"zone",FORMA_BUILDING_ENVELOPE:"building_envelope"},Re=e=>{const t=e.split(":");if(t.length===6){const[,r,n,o,a,i]=t;return{namespace:r,system:n,authcontext:o,id:a,revision:i}}else if(t.length===5){const[,r,n,o,a]=t;return{namespace:r,system:n,id:o,revision:a}}throw new Error("urn is not of length 5 or 6")},nr=(e,t,r=!0)=>{let n;const{authcontext:o,system:a,id:i,revision:c}=Re(e);if(o)if(r)n=`/api/${a}/elements/${i}/revisions/${c}?authcontext=${o}&version=2`;else{const u=i.indexOf("+");n=`/api/${a}/elements/${i.slice(0,u)}/revisions/${c}?authcontext=${o}&version=2`}else n=`/api/${a}/elements/${i}/revisions/${c}?projectId=${t}`;return n},Ce=Symbol("IDBStore");class Vr{constructor(t="composi-idb",r="composi-store"){this.storeName=r,this.dbName=t,this._dbp=new Promise((o,a)=>{const i=indexedDB.open(t,1);i.onerror=()=>a(i.error),i.onsuccess=()=>{o(i.result)},i.onupgradeneeded=()=>{i.result.createObjectStore(r)}}),this[Ce]=(o,a)=>this._dbp.then(i=>new Promise((c,u)=>{const l=i.transaction(this.storeName,o);l.oncomplete=()=>c(),l.onabort=l.onerror=()=>u(l.error),a(l.objectStore(this.storeName))}))}}let st;function Me(){return st||(st=new Vr),st}function Hr(e,t=Me()){let r;return t[Ce]("readonly",n=>{r=n.get(e)}).then(()=>r.result)}function Yr(e,t,r=Me()){return r[Ce]("readwrite",n=>{n.put(t,e)})}function Xr(e,t=Me()){return t[Ce]("readwrite",r=>{r.delete(e)})}function Jr(e=Me()){return e[Ce]("readwrite",t=>{t.clear()})}function Kr(e=Me()){const t=[];return e[Ce]("readonly",r=>(r.openKeyCursor||r.openCursor).call(r).onsuccess=function(){this.result&&(t.push(this.result.key),this.result.continue())}).then(()=>t)}const ze={get:Hr,set:Yr,remove:Xr,clear:Jr,keys:Kr,name:"composi-idb",storeName:"composi-store"};function qr(e,t){ze.set(e,t)}async function or(e){return await ze.get(e)}async function Zr(e){const t=await ze.keys();for(const r of t)r.includes(e)&&(await ze.remove(r),console.log(`removing ${r} from cache`))}function Qr(e,t){FormIt.Layers.AddLayer(e,t,!0);let r=FormIt.Layers.GetLayerID(t),n;return r==WSM.INVALID_ID?console.error("Cannot retrieve the Forma layer"):(n=ar(e,t),n==WSM.INVALID_ID&&(console.error("Cannot retrieve the Forma WSM layer"),r=void 0)),{formItLayerId:r,wsmLayerId:n}}async function ar(e,t){const r=await WSM.APIGetAllObjectsByTypeReadOnly(e,WSM.nObjectType.nLayerType);let n=WSM.INVALID_ID;for(let o=0;o<r.length;o++)if((await WSM.APIGetLayerDataReadOnly(e,r[o])).name==t){n=r[o];break}return n}async function en(){const e=["site_limit","building","vegetation","generic","road","rails","property_boundary","zone","building_envelope"],t=Object.values(Be).filter(a=>e.includes(a));let r=[];for(const a of t)r.push(pt(a));return r.push(pt(Be.FORMA_CONTEXT)),(await Promise.all(r)).filter(a=>a.formItLayerId===WSM.INVALID_ID||!a.wsmLayerId||a.wsmLayerId===-1).length===0}async function pt(e=Be.FORMA_CONTEXT){const t=await FormIt.Layers.GetLayerID(e);if(t===WSM.INVALID_ID){const r=await Qr(z,e),n=r.formItLayerId,o=r.wsmLayerId,a="FormIt::OutOfContextLayer";if(n===WSM.INVALID_ID||!o)return r;if(!WSM.Utils.SetOrCreateStringAttributeForObject(z,o,a,"true")){console.error("Cannot set out of context attribute");return}return FormIt.Layers.SetLayerPickable(n,!1),r}return{formItLayerId:t,wsmLayerId:t!==WSM.INVALID_ID?await ar(z,e):-1}}function tn(e,t){for(const[r,n]of Object.entries(t))for(const o of n)if(e.includes(o))return r}const we="https://local.spacemaker.ai:3001",rn="https://app.spacemaker.ai";class nn{getWorkspaces(){return fetch(`${we}/api/workspaces`).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()})}getProjects(t){return fetch(`${we}/api/projects?customer=${t}&include_archived=false`).then(r=>{if(!r.ok)throw new Error(r.statusText);return r.json()})}countProposals(t){return fetch(`${we}/api/proposal/elements/count?authcontext=${t}`).then(r=>{if(!r.ok)throw new Error(r.statusText);return r.json()})}getProposals(t){return fetch(`${we}/api/proposal/elements?authcontext=${t}&version=2`).then(r=>{if(!r.ok)throw new Error(r.statusText);return r.json()})}getProposalElement(t,r){try{const n=`/api/proposal/elements/${t}?authcontext=${r}`;return fetch(n).then(o=>{if(!o.ok)throw new Error(o.statusText);return o.json()})}catch{return null}}FormatThumbnailUrl(t,r){return`${rn}/api/thumbnails/v2/${r}?size=170&authcontext=${t}&projectId=${t}`}fetchRawDatas(t){return t.indexOf("/")===0&&(t=`${we}${t}`),fetch(t,{method:"GET",headers:{"Content-Type":"application/json","Set-Cookie":"true"}})}getAsJson(t){return t.indexOf("/")===0&&(t=`${we}${t}`),fetch(t,{method:"GET",headers:{"Content-Type":"application/json","Set-Cookie":"true"}}).then(r=>r.ok?r.json():!1)}}const de=new nn;async function bt(e){}async function St(e,t,r,n){r&&bt(e.savePath),t?n&&n(e):await de.fetchRawDatas(e.FetchUrl).then(async o=>o.blob()).then(async o=>{n&&n(e)})}const Ue=e=>{const t=[...e];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t};function on(e,t){const r={},n=(o,a=[])=>{var l;const i=e[o.urn];if(!i)throw new Error(`Child ${o.key} points to unknown urn ${o.urn}`);const c=[...a,o.key],u=c.join("/");r[u]=o.urn,(l=i.children)==null||l.forEach(p=>n(p,c))};return n({urn:t,key:zr}),r}function an(e,t,r){var a,i,c;const n={},o=[];for(const[u,l]of Object.entries(t)){const p=e[l],h=u.split("/").slice(0,2).join("/"),C=p.properties.spacemakerObjectStorageReferenceFormats,x=(C==null?void 0:C[0])==="axm",{system:v}=Re(p.urn),y=sn(u,e,t);if(v==="integrate"&&x){const b={...p,parentTransform:p.transform,path:u};o.push(b);continue}if(p.properties.category==="ConceptualElement")continue;const I=(c=(i=(a=p.properties)==null?void 0:a.geometry)==null?void 0:i.volumeMesh)==null?void 0:c.url;if(I){const b=Re(l).id,_=p.properties.geometry.volumeMesh.id;n[I]||(n[I]={elements:[]});const T=r==null?void 0:r.includes(h);n[I].elements.push({transform:y,needsConverted:T,id:b,geometryId:_,properties:p==null?void 0:p.properties,urn:p.urn,fullIdPath:u})}}return{glbUrlMap:n,axmList:o}}function sn(e,t,r){const n=e.split("/");let o,a=0,i=n[a];return o=ir(i,a,r,t,o,n),o}const ir=(e,t,r,n,o,a)=>{var y,d;const i=e.split("/"),c=i.length>1?i.slice(0,t).join("/"):void 0,u=r[c],l=n[u],p=(d=(y=l==null?void 0:l.children)==null?void 0:y.find(I=>I.key===i.slice(-1).toString()))==null?void 0:d.transform,h=r[i.join("/")],C=n[h],x=C==null?void 0:C.transform;return o=_t(o,_t(p,x)),t++,a.slice(t).length>0&&(e=a.slice(0,t+1).join("/"),ir(e,t,r,n,o,a)),o},_t=(e,t)=>{let r=e;if(t)if(e){let n=WSM.Geom.Transf3d();n.data=Ue(e);const o=WSM.Geom.Transf3d();o.data=Ue(t),FormItInterface.CallMethod("FormitPlugin.Multiply",[n,o],a=>{r=Ue(a.data)})}else r=t;return r};async function cn(e,t){const r="/tmp/terrain.window.WSM",n=Re(t.urn).revision,o=await ln(`3d-sketch-terrain-${e}-revision-${n}`);try{await St({savePath:r},o,!0,async()=>{const a=await WSM.APIGetIdOfActiveDeltaReadOnly(z);await FormIt.ImportFile(r,!1,WSM.INVALID_ID,!1);const i=await WSM.APIGetIdOfActiveDeltaReadOnly(z),u=(await WSM.APIGetCreatedChangedAndDeletedInDeltaRangeReadOnly(z,a,i,[WSM.nGroupType])).created;if(await bt(r),u.length===1)return{idArray:u,isTerrain:!0,isAxm:!1};throw new Error("Error reading terrain transform from cached window.WSM, did not get 1 created group")})}catch(a){return console.log(`Error loading terrain from cache - ${a}`),{idArray:[]}}}async function ln(e){let t=0;return new Promise((r,n)=>{try{const o=setInterval(async()=>{const a=await or(e);a?(clearInterval(o),r(a)):(t++,t%100===0&&console.log(`Did not find cache for ${e}, still waiting.`))},100)}catch(o){n(o)}})}async function un(e,t,r,n,o){const a=`/tmp/${r}.glb`,i=e.includes("terrain");return new Promise((c,u)=>{try{St({fetchUrl:e,savePath:a},null,!0,async()=>{const l=[],p=[];let h=[],C;if(t.forEach(x=>{x.needsConverted?p.push(x):l.push(x)}),l.length>0){const x=Nt({fileLocation:a,elementDetails:l,isTerrain:i,transform:void 0}),v=tn(l[0].fullIdPath,n);if(v){const d=await pt(v);FormIt.Layers.AssignLayerToObjects(d.formItLayerId,[z,x])}const y=!o.includes(v);FormIt.Layers.SetLayerVisibility(v,y),h=[...h,x]}if(p.length>0){const x=Nt({fileLocation:a,elementDetails:p,isTerrain:i,transform:void 0}),v=WSM.APIGetGroupReferencedHistoryReadOnly(z,x),y=WSM.APIGetAllObjectsByTypeReadOnly(v,WSM.nMeshType),d=Math.sqrt(3)/2;WSM.APIConvertMeshesToObjects(v,y,d),C=x,h=[...h,x]}bt(a),c({allIdsCreated:h,idEditingForConversion:C,isTerrain:i})})}catch(l){u(`Failed to request and load file into memory for url - ${e} - error: ${l}`)}})}function Nt({fileLocation:e,elementDetails:t,isTerrain:r,transform:n}){const a=t.map(d=>({objectName:"GltfNodeInfo",id:d.geometryId,transform:d.transform||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]})).filter(d=>d.id);let i=WSM.Geom.Transf3d();n&&(i.data=Ue(n));const c=WSM.Geom.Point3d(0,0,0),u=WSM.Vector3d.Vector3d(Se,Se,Se),l=WSM.Transf3d.MakeScalingTransform(c,u);i=WSM.Transf3d.Multiply(l,i);const p=WSM.APIGetIdOfActiveDeltaReadOnly(z);WSM.Gltf.APILoadGltfFile(z,e,i,WSM.INVALID_ID,r?WSM.nGeneratedNormalsOptions.nSmoothNormals:WSM.nGeneratedNormalsOptions.nUnsharedNormals,a||[],!r);const h=WSM.APIGetIdOfActiveDeltaReadOnly(z),x=WSM.APIGetCreatedChangedAndDeletedInDeltaRangeReadOnly(z,p,h,[WSM.nMeshType,WSM.nInstanceType]).created,v=WSM.Utils.CreateAlignedAndCenteredGroup(z,x),y=WSM.APIGetObjectsByTypeReadOnly(z,v,WSM.nObjectType.nInstanceType);if(y.length!==1){console.error("Created instanceIds should be 1");return}return y[0]}var De,dn=new Uint8Array(16);function fn(){if(!De&&(De=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!De))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return De(dn)}const pn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function hn(e){return typeof e=="string"&&pn.test(e)}var Q=[];for(var ct=0;ct<256;++ct)Q.push((ct+256).toString(16).substr(1));function mn(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Q[e[t+0]]+Q[e[t+1]]+Q[e[t+2]]+Q[e[t+3]]+"-"+Q[e[t+4]]+Q[e[t+5]]+"-"+Q[e[t+6]]+Q[e[t+7]]+"-"+Q[e[t+8]]+Q[e[t+9]]+"-"+Q[e[t+10]]+Q[e[t+11]]+Q[e[t+12]]+Q[e[t+13]]+Q[e[t+14]]+Q[e[t+15]]).toLowerCase();if(!hn(r))throw TypeError("Stringified UUID is invalid");return r}function sr(e,t,r){e=e||{};var n=e.random||(e.rng||fn)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return mn(n)}async function cr(e,t,r){typeof e=="string"&&(e={key:sr(),urn:e,transform:void 0});let n;if(r[e.urn])n=r[e.urn],await Ut(n,t,r);else{const o=nr(e.urn,t);await de.getAsJson(o).then(async a=>{for(const[i,c]of Object.entries(a))r[i]=c;n=r[e.urn],await Ut(n,t,r)})}}async function Ut(e,t,r){var n;if(((n=e.children)==null?void 0:n.length)>0)for(const o of e.children)await cr(o,t,r)}function gn(e,t,r){let n=[];for(const o of e.children)n.push(cr(o,t,r));return n}async function yn(e,t,r,n,o,a){const i=on(e,t.urn),{glbUrlMap:c,axmList:u}=an(e,i,r);let l;debugger;for(const[p,h]of Object.entries(c))if(p.includes("terrain")){const C=h.elements[0];if(l){if(l!==C.id)throw new Error(`Found terrain id ${C.id} does not match id of previously found terrain id ${l}. Unable to determine which terrain to load.`);console.warn(`Found a duplicate terrain in proposal. This may not be a problem. ${C.id}`)}else l=C.id,await cn(n,C)}else un(p,h.elements,sr(),o,a)}async function vn(e,t,r){var i;const n=await de.getProposalElement(t,e);if(!n)return;const o=Object.values(n).find(c=>c.properties.category==="proposal"),a=(i=o==null?void 0:o.children)==null?void 0:i.find(c=>c.urn.includes("terrain"));wn(a,e,t.proposalId,r)}async function wn(e,t,r,n){var c,u,l;debugger;const o=Re(e.urn).revision;let a=`3d-sketch-terrain-${r}-revision-${o}`;if(await or(a))n&&n();else{const p=nr(e.urn,t),C=await(await fetch(p)).json();let x,v;if(WSM.APIDeleteAllHistories(),WSM.APICreateHistory(z),FormIt.UndoManagement.BeginState(),Object.entries(C).length===1)for(const[,P]of Object.entries(C))x=(l=(u=(c=P.properties)==null?void 0:c.geometry)==null?void 0:u.volumeMesh)==null?void 0:l.url,v=await Sn(P.properties,t);else throw new Error("Did not find exactly one terrain urn");const y="/tmp/terrain.glb",d="/tmp/terrain.wsm";let I=await WSM.Geom.Transf3d();debugger;const b=await WSM.Geom.Point3d(0,0,0),_=await WSM.Geom.Vector3d(Se,Se,Se),T=await WSM.Geom.MakeScalingTransform(b,_);let M;await FormItInterface.CallMethod("FormitPlugin.Multiply",[T,I],async P=>{M=P,console.info(`multiply result: ${M}`),I=JSON.parse(M),await St({fetchUrl:x,savePath:y,transf3d:I,materialId:v,tempWsmLocation:d,key:a,proposalId:r,terrainRevisionId:o,callback:n},null,!0,bn)})}}async function bn(e,t){await FormItInterface.CallMethod("FormitPlugin.APILoadGltfFile",e,async()=>{const r=await WSM.APIGetAllObjectsByTypeReadOnly(0,WSM.nObjectType.nMeshType);if(await WSM.APISetObjectsMaterial(z,r,e.materialId),r.length!==1)throw new Error("3D Sketch terrain worker - Did not create exactly one terrain mesh");const o=(await WSM.APIGetBoxReadOnly(z,r[0])).lower.z-1,a=await WSM.Geom.TranslateTransform(await WSM.Geom.Transf3d(),await WSM.Geom.Vector3d(0,0,-o)),i=await WSM.Utils.CreateAlignedAndCenteredGroup(z,r);await WSM.APITransformObject(z,i,a),await WSM.Utils.SetOrCreateStringAttributeForObject(z,i,FormIt.TERRAIN_KEY,JSON.stringify(-o)),await FormIt.UndoManagement.EndState("Initial State"),await WSM.APISaveToFileReadOnly(z,i,e.tempWsmLocation,0,!0,1,[]);const c=window.FormItModule.FormIt_ReadFile(tempWsmLocation);Zr(`3d-sketch-terrain-${e.proposalId}`),qr(e.key,c),console.log(`persisted terrain in cache: ${e.proposalId}-revision-${e.terrainRevisionId}`),t&&t()})}async function Sn(e,t){const r=await de.getAsJson(`/api/projects/${t}`),n="/texture/v2",o=e.geoReference.srid,a=encodeURIComponent(JSON.stringify(e.bbox)),i=`${n}/texture.jpeg?countryCode=${r.countryCode}&srid=${o}&bbox=${a}&size=4096&projectId=${t}`,[c]=await Promise.all([await de.getAsJson(i)]),u=c.link,l="/terrainTexture.jpeg",p=await fetch(u);if(p.ok){const h=await p.blob(),C=await createImageBitmap(h,{imageOrientation:"flipY"}),x=new self.OffscreenCanvas(C.width,C.height);x.getContext("bitmaprenderer").transferFromImageBitmap(C);const y=await x.convertToBlob(),d=new Uint8Array(await y.arrayBuffer()),I=await WSM.APICreateTexture(z,[...d],!0,l);return await WSM.APICreateMaterial(z,WSM.Color(225,225,225,255),1,1,I)}}var In={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ReferenceType=void 0,function(t){t.INLINE="Inline",t.REMOTE="Remote"}(e.ReferenceType||(e.ReferenceType={}))})(In);async function xn(e,t){this.hideLayersBeforeSave().then(async r=>{FormIt.Layers.SetLayerVisibility(e,!1).then(()=>{FormItInterface.CallMethod("FormitPlugin.GetAllGeometryInformation",[],async n=>{let o=JSON.parse(n);FormIt.Layers.SetLayerVisibility(e,!0).then(()=>{this.returnLayersToPreviousVibility(r).then(()=>{this.getPolygonData(z,o,t)})})})})})}async function Cn({formitGeometry:e,proposalId:t,projectId:r,polygonData:n,objectId:o,callback:a}){this.saveTemp(o,z).then(i=>{if(!i){console.error("Can't save temporary wsm file.");return}this.generatePayload(e,async c=>{this.generateStorageReference(i,r,async u=>{if(!u){a&&a(!1);return}this.createOrUpdateElement(r,c,u,n).then(async l=>{l?this.updateProposalElement({elementId:t,authContext:r,createdUrn:l.urn}).then(p=>{a&&a(p)}):a&&a(!1)})})})})}class An{getCookie(t){const r=t.length+1;return document.cookie.split(";").map(n=>n.trim()).filter(n=>n.substring(0,r)===`${t}=`).map(n=>decodeURIComponent(n.substring(r)))[0]||null}accessSpacemaker(t){let r=null;if(t){r=window.open("https://app.spacemaker.ai/auth/login?rd=https%3A%2F%2Fapp.spacemaker.ai%2Fprojects","_blank","width= 500px, height=500px");let n=setInterval(()=>{this.getCookie("ajs_user_id")!==null&&(clearInterval(n),r!==null&&r.close())},1e3)}else{const o="https://local.spacemaker.ai:3001?loggedIn=1";window.location.replace(`https://app.spacemaker.ai/auth/login?rd=${o}`)}}async save({projectId:t,proposalId:r},n){FormItInterface.CallMethod("FormitPlugin.GetAllGeometryInformation",[],async()=>{xn(Be.FORMA_BUILDINGS,(o,a)=>{a||(a={}),Cn({formitGeometry:o,proposalId:r,projectId:t,polygonData:a,objectId:0,callback:n})})})}async getElementsAndSaveCache(t,r){debugger;await vn(t.projectId,t.proposalId,r)}async fetchAndLoadElements(t,r,n,o){const a=await de.getProposalElement(n.proposalId,n.projectId);if(!a)return;const i=Object.values(a).find(l=>l.properties.category==="proposal"),c={[i.urn]:i};if(await en()){let l=gn(i,n.projectId,c);await Promise.all(l).then(async()=>{debugger;yn(c,i,"",n.proposalId,t,r).then(()=>{o(n.proposalId)})})}}}const Ee=new An;class Pn extends B.Component{constructor(t){super(t),this.state={loggedIn:!1}}static login(){return Ee.accessSpacemaker(!1),null}render(){return m(pe,{})}}class It{constructor(){re(this,"id");re(this,"urn");re(this,"name");re(this,"metadata");re(this,"version");this.id="",this.urn="",this.name="",this.version="1",this.metadata=null}Fill(t,r,n,o,a){if(this.id=t,this.version=n,r===null||r===""){let i=t.split("prop_");this.name=`prop_${i[1].substring(0,2)}`}else this.name=r;this.urn=a,this.metadata=o}}var Le={},kn={get exports(){return Le},set exports(e){Le=e}},U={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J=typeof Symbol=="function"&&Symbol.for,xt=J?Symbol.for("react.element"):60103,Ct=J?Symbol.for("react.portal"):60106,Xe=J?Symbol.for("react.fragment"):60107,Je=J?Symbol.for("react.strict_mode"):60108,Ke=J?Symbol.for("react.profiler"):60114,qe=J?Symbol.for("react.provider"):60109,Ze=J?Symbol.for("react.context"):60110,At=J?Symbol.for("react.async_mode"):60111,Qe=J?Symbol.for("react.concurrent_mode"):60111,et=J?Symbol.for("react.forward_ref"):60112,tt=J?Symbol.for("react.suspense"):60113,Tn=J?Symbol.for("react.suspense_list"):60120,rt=J?Symbol.for("react.memo"):60115,nt=J?Symbol.for("react.lazy"):60116,En=J?Symbol.for("react.block"):60121,On=J?Symbol.for("react.fundamental"):60117,Rn=J?Symbol.for("react.responder"):60118,Ln=J?Symbol.for("react.scope"):60119;function se(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case xt:switch(e=e.type,e){case At:case Qe:case Xe:case Ke:case Je:case tt:return e;default:switch(e=e&&e.$$typeof,e){case Ze:case et:case nt:case rt:case qe:return e;default:return t}}case Ct:return t}}}function lr(e){return se(e)===Qe}U.AsyncMode=At;U.ConcurrentMode=Qe;U.ContextConsumer=Ze;U.ContextProvider=qe;U.Element=xt;U.ForwardRef=et;U.Fragment=Xe;U.Lazy=nt;U.Memo=rt;U.Portal=Ct;U.Profiler=Ke;U.StrictMode=Je;U.Suspense=tt;U.isAsyncMode=function(e){return lr(e)||se(e)===At};U.isConcurrentMode=lr;U.isContextConsumer=function(e){return se(e)===Ze};U.isContextProvider=function(e){return se(e)===qe};U.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===xt};U.isForwardRef=function(e){return se(e)===et};U.isFragment=function(e){return se(e)===Xe};U.isLazy=function(e){return se(e)===nt};U.isMemo=function(e){return se(e)===rt};U.isPortal=function(e){return se(e)===Ct};U.isProfiler=function(e){return se(e)===Ke};U.isStrictMode=function(e){return se(e)===Je};U.isSuspense=function(e){return se(e)===tt};U.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Xe||e===Qe||e===Ke||e===Je||e===tt||e===Tn||typeof e=="object"&&e!==null&&(e.$$typeof===nt||e.$$typeof===rt||e.$$typeof===qe||e.$$typeof===Ze||e.$$typeof===et||e.$$typeof===On||e.$$typeof===Rn||e.$$typeof===Ln||e.$$typeof===En)};U.typeOf=se;(function(e){e.exports=U})(kn);function jn(e){function t(S,g,w,O,s){for(var F=0,f=0,V=0,$=0,N,R,K=0,ne=0,j,te=j=N=0,D=0,q=0,ke=0,Z=0,$e=w.length,Te=$e-1,ue,E="",H="",ot="",at="",me;D<$e;){if(R=w.charCodeAt(D),D===Te&&f+$+V+F!==0&&(f!==0&&(R=f===47?10:47),$=V=F=0,$e++,Te++),f+$+V+F===0){if(D===Te&&(0<q&&(E=E.replace(C,"")),0<E.trim().length)){switch(R){case 32:case 9:case 59:case 13:case 10:break;default:E+=w.charAt(D)}R=59}switch(R){case 123:for(E=E.trim(),N=E.charCodeAt(0),j=1,Z=++D;D<$e;){switch(R=w.charCodeAt(D)){case 123:j++;break;case 125:j--;break;case 47:switch(R=w.charCodeAt(D+1)){case 42:case 47:e:{for(te=D+1;te<Te;++te)switch(w.charCodeAt(te)){case 47:if(R===42&&w.charCodeAt(te-1)===42&&D+2!==te){D=te+1;break e}break;case 10:if(R===47){D=te+1;break e}}D=te}}break;case 91:R++;case 40:R++;case 34:case 39:for(;D++<Te&&w.charCodeAt(D)!==R;);}if(j===0)break;D++}switch(j=w.substring(Z,D),N===0&&(N=(E=E.replace(h,"").trim()).charCodeAt(0)),N){case 64:switch(0<q&&(E=E.replace(C,"")),R=E.charCodeAt(1),R){case 100:case 109:case 115:case 45:q=g;break;default:q=he}if(j=t(g,q,j,R,s+1),Z=j.length,0<le&&(q=r(he,E,ke),me=c(3,j,q,g,ae,Y,Z,R,s,O),E=q.join(""),me!==void 0&&(Z=(j=me.trim()).length)===0&&(R=0,j="")),0<Z)switch(R){case 115:E=E.replace(P,i);case 100:case 109:case 45:j=E+"{"+j+"}";break;case 107:E=E.replace(b,"$1 $2"),j=E+"{"+j+"}",j=X===1||X===2&&a("@"+j,3)?"@-webkit-"+j+"@"+j:"@"+j;break;default:j=E+j,O===112&&(j=(H+=j,""))}else j="";break;default:j=t(g,r(g,E,ke),j,O,s+1)}ot+=j,j=ke=q=te=N=0,E="",R=w.charCodeAt(++D);break;case 125:case 59:if(E=(0<q?E.replace(C,""):E).trim(),1<(Z=E.length))switch(te===0&&(N=E.charCodeAt(0),N===45||96<N&&123>N)&&(Z=(E=E.replace(" ",":")).length),0<le&&(me=c(1,E,g,S,ae,Y,H.length,O,s,O))!==void 0&&(Z=(E=me.trim()).length)===0&&(E="\0\0"),N=E.charCodeAt(0),R=E.charCodeAt(1),N){case 0:break;case 64:if(R===105||R===99){at+=E+w.charAt(D);break}default:E.charCodeAt(Z-1)!==58&&(H+=o(E,N,R,E.charCodeAt(2)))}ke=q=te=N=0,E="",R=w.charCodeAt(++D)}}switch(R){case 13:case 10:f===47?f=0:1+N===0&&O!==107&&0<E.length&&(q=1,E+="\0"),0<le*ve&&c(0,E,g,S,ae,Y,H.length,O,s,O),Y=1,ae++;break;case 59:case 125:if(f+$+V+F===0){Y++;break}default:switch(Y++,ue=w.charAt(D),R){case 9:case 32:if($+F+f===0)switch(K){case 44:case 58:case 9:case 32:ue="";break;default:R!==32&&(ue=" ")}break;case 0:ue="\\0";break;case 12:ue="\\f";break;case 11:ue="\\v";break;case 38:$+f+F===0&&(q=ke=1,ue="\f"+ue);break;case 108:if($+f+F+ce===0&&0<te)switch(D-te){case 2:K===112&&w.charCodeAt(D-3)===58&&(ce=K);case 8:ne===111&&(ce=ne)}break;case 58:$+f+F===0&&(te=D);break;case 44:f+V+$+F===0&&(q=1,ue+="\r");break;case 34:case 39:f===0&&($=$===R?0:$===0?R:$);break;case 91:$+f+V===0&&F++;break;case 93:$+f+V===0&&F--;break;case 41:$+f+F===0&&V--;break;case 40:if($+f+F===0){if(N===0)switch(2*K+3*ne){case 533:break;default:N=1}V++}break;case 64:f+V+$+F+te+j===0&&(j=1);break;case 42:case 47:if(!(0<$+F+V))switch(f){case 0:switch(2*R+3*w.charCodeAt(D+1)){case 235:f=47;break;case 220:Z=D,f=42}break;case 42:R===47&&K===42&&Z+2!==D&&(w.charCodeAt(Z+2)===33&&(H+=w.substring(Z,D+1)),ue="",f=0)}}f===0&&(E+=ue)}ne=K,K=R,D++}if(Z=H.length,0<Z){if(q=g,0<le&&(me=c(2,H,q,S,ae,Y,Z,O,s,O),me!==void 0&&(H=me).length===0))return at+H+ot;if(H=q.join(",")+"{"+H+"}",X*ce!==0){switch(X!==2||a(H,2)||(ce=0),ce){case 111:H=H.replace(T,":-moz-$1")+H;break;case 112:H=H.replace(_,"::-webkit-input-$1")+H.replace(_,"::-moz-$1")+H.replace(_,":-ms-input-$1")+H}ce=0}}return at+H+ot}function r(S,g,w){var O=g.trim().split(d);g=O;var s=O.length,F=S.length;switch(F){case 0:case 1:var f=0;for(S=F===0?"":S[0]+" ";f<s;++f)g[f]=n(S,g[f],w).trim();break;default:var V=f=0;for(g=[];f<s;++f)for(var $=0;$<F;++$)g[V++]=n(S[$]+" ",O[f],w).trim()}return g}function n(S,g,w){var O=g.charCodeAt(0);switch(33>O&&(O=(g=g.trim()).charCodeAt(0)),O){case 38:return g.replace(I,"$1"+S.trim());case 58:return S.trim()+g.replace(I,"$1"+S.trim());default:if(0<1*w&&0<g.indexOf("\f"))return g.replace(I,(S.charCodeAt(0)===58?"":"$1")+S.trim())}return S+g}function o(S,g,w,O){var s=S+";",F=2*g+3*w+4*O;if(F===944){S=s.indexOf(":",9)+1;var f=s.substring(S,s.length-1).trim();return f=s.substring(0,S).trim()+f+";",X===1||X===2&&a(f,1)?"-webkit-"+f+f:f}if(X===0||X===2&&!a(s,1))return s;switch(F){case 1015:return s.charCodeAt(10)===97?"-webkit-"+s+s:s;case 951:return s.charCodeAt(3)===116?"-webkit-"+s+s:s;case 963:return s.charCodeAt(5)===110?"-webkit-"+s+s:s;case 1009:if(s.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+s+s;case 978:return"-webkit-"+s+"-moz-"+s+s;case 1019:case 983:return"-webkit-"+s+"-moz-"+s+"-ms-"+s+s;case 883:if(s.charCodeAt(8)===45)return"-webkit-"+s+s;if(0<s.indexOf("image-set(",11))return s.replace(ee,"$1-webkit-$2")+s;break;case 932:if(s.charCodeAt(4)===45)switch(s.charCodeAt(5)){case 103:return"-webkit-box-"+s.replace("-grow","")+"-webkit-"+s+"-ms-"+s.replace("grow","positive")+s;case 115:return"-webkit-"+s+"-ms-"+s.replace("shrink","negative")+s;case 98:return"-webkit-"+s+"-ms-"+s.replace("basis","preferred-size")+s}return"-webkit-"+s+"-ms-"+s+s;case 964:return"-webkit-"+s+"-ms-flex-"+s+s;case 1023:if(s.charCodeAt(8)!==99)break;return f=s.substring(s.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+f+"-webkit-"+s+"-ms-flex-pack"+f+s;case 1005:return v.test(s)?s.replace(x,":-webkit-")+s.replace(x,":-moz-")+s:s;case 1e3:switch(f=s.substring(13).trim(),g=f.indexOf("-")+1,f.charCodeAt(0)+f.charCodeAt(g)){case 226:f=s.replace(M,"tb");break;case 232:f=s.replace(M,"tb-rl");break;case 220:f=s.replace(M,"lr");break;default:return s}return"-webkit-"+s+"-ms-"+f+s;case 1017:if(s.indexOf("sticky",9)===-1)break;case 975:switch(g=(s=S).length-10,f=(s.charCodeAt(g)===33?s.substring(0,g):s).substring(S.indexOf(":",7)+1).trim(),F=f.charCodeAt(0)+(f.charCodeAt(7)|0)){case 203:if(111>f.charCodeAt(8))break;case 115:s=s.replace(f,"-webkit-"+f)+";"+s;break;case 207:case 102:s=s.replace(f,"-webkit-"+(102<F?"inline-":"")+"box")+";"+s.replace(f,"-webkit-"+f)+";"+s.replace(f,"-ms-"+f+"box")+";"+s}return s+";";case 938:if(s.charCodeAt(5)===45)switch(s.charCodeAt(6)){case 105:return f=s.replace("-items",""),"-webkit-"+s+"-webkit-box-"+f+"-ms-flex-"+f+s;case 115:return"-webkit-"+s+"-ms-flex-item-"+s.replace(A,"")+s;default:return"-webkit-"+s+"-ms-flex-line-pack"+s.replace("align-content","").replace(A,"")+s}break;case 973:case 989:if(s.charCodeAt(3)!==45||s.charCodeAt(4)===122)break;case 931:case 953:if(G.test(S)===!0)return(f=S.substring(S.indexOf(":")+1)).charCodeAt(0)===115?o(S.replace("stretch","fill-available"),g,w,O).replace(":fill-available",":stretch"):s.replace(f,"-webkit-"+f)+s.replace(f,"-moz-"+f.replace("fill-",""))+s;break;case 962:if(s="-webkit-"+s+(s.charCodeAt(5)===102?"-ms-"+s:"")+s,w+O===211&&s.charCodeAt(13)===105&&0<s.indexOf("transform",10))return s.substring(0,s.indexOf(";",27)+1).replace(y,"$1-webkit-$2")+s}return s}function a(S,g){var w=S.indexOf(g===1?":":"{"),O=S.substring(0,g!==3?w:10);return w=S.substring(w+1,S.length-1),Ae(g!==2?O:O.replace(L,"$1"),w,g)}function i(S,g){var w=o(g,g.charCodeAt(0),g.charCodeAt(1),g.charCodeAt(2));return w!==g+";"?w.replace(k," or ($1)").substring(4):"("+g+")"}function c(S,g,w,O,s,F,f,V,$,N){for(var R=0,K=g,ne;R<le;++R)switch(ne=ie[R].call(p,S,K,w,O,s,F,f,V,$,N)){case void 0:case!1:case!0:case null:break;default:K=ne}if(K!==g)return K}function u(S){switch(S){case void 0:case null:le=ie.length=0;break;default:if(typeof S=="function")ie[le++]=S;else if(typeof S=="object")for(var g=0,w=S.length;g<w;++g)u(S[g]);else ve=!!S|0}return u}function l(S){return S=S.prefix,S!==void 0&&(Ae=null,S?typeof S!="function"?X=1:(X=2,Ae=S):X=0),l}function p(S,g){var w=S;if(33>w.charCodeAt(0)&&(w=w.trim()),Pe=w,w=[Pe],0<le){var O=c(-1,g,w,w,ae,Y,0,0,0,0);O!==void 0&&typeof O=="string"&&(g=O)}var s=t(he,w,g,0,0);return 0<le&&(O=c(-2,s,w,w,ae,Y,s.length,0,0,0),O!==void 0&&(s=O)),Pe="",ce=0,Y=ae=1,s}var h=/^\0+/g,C=/[\0\r\f]/g,x=/: */g,v=/zoo|gra/,y=/([,: ])(transform)/g,d=/,\r+?/g,I=/([\t\r\n ])*\f?&/g,b=/@(k\w+)\s*(\S*)\s*/,_=/::(place)/g,T=/:(read-only)/g,M=/[svh]\w+-[tblr]{2}/,P=/\(\s*(.*)\s*\)/g,k=/([\s\S]*?);/g,A=/-self|flex-/g,L=/[^]*?(:[rp][el]a[\w-]+)[^]*/,G=/stretch|:\s*\w+\-(?:conte|avail)/,ee=/([^-])(image-set\()/,Y=1,ae=1,ce=0,X=1,he=[],ie=[],le=0,Ae=null,ve=0,Pe="";return p.use=u,p.set=l,e!==void 0&&l(e),p}var Mn={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Fn(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var $n=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Wt=Fn(function(e){return $n.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Pt=Le,Dn={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},_n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Nn={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ur={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},kt={};kt[Pt.ForwardRef]=Nn;kt[Pt.Memo]=ur;function Gt(e){return Pt.isMemo(e)?ur:kt[e.$$typeof]||Dn}var Un=Object.defineProperty,Wn=Object.getOwnPropertyNames,Bt=Object.getOwnPropertySymbols,Gn=Object.getOwnPropertyDescriptor,Bn=Object.getPrototypeOf,zt=Object.prototype;function dr(e,t,r){if(typeof t!="string"){if(zt){var n=Bn(t);n&&n!==zt&&dr(e,n,r)}var o=Wn(t);Bt&&(o=o.concat(Bt(t)));for(var a=Gt(e),i=Gt(t),c=0;c<o.length;++c){var u=o[c];if(!_n[u]&&!(r&&r[u])&&!(i&&i[u])&&!(a&&a[u])){var l=Gn(t,u);try{Un(e,u,l)}catch{}}}}return e}var zn=dr;function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Vt=function(e,t){for(var r=[e[0]],n=0,o=t.length;n<o;n+=1)r.push(t[n],e[n+1]);return r},ht=function(e){return e!==null&&typeof e=="object"&&(e.toString?e.toString():Object.prototype.toString.call(e))==="[object Object]"&&!Le.typeOf(e)},Ve=Object.freeze([]),ge=Object.freeze({});function je(e){return typeof e=="function"}function Ht(e){return e.displayName||e.name||"Component"}function Tt(e){return e&&typeof e.styledComponentId=="string"}var Ie=typeof process<"u"&&{}!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",Et=typeof window<"u"&&"HTMLElement"in window,Vn=Boolean(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&{}!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""?{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY:!1));function Fe(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(r.length>0?" Args: "+r.join(", "):""))}var Hn=function(){function e(r){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=r}var t=e.prototype;return t.indexOfGroup=function(r){for(var n=0,o=0;o<r;o++)n+=this.groupSizes[o];return n},t.insertRules=function(r,n){if(r>=this.groupSizes.length){for(var o=this.groupSizes,a=o.length,i=a;r>=i;)(i<<=1)<0&&Fe(16,""+r);this.groupSizes=new Uint32Array(i),this.groupSizes.set(o),this.length=i;for(var c=a;c<i;c++)this.groupSizes[c]=0}for(var u=this.indexOfGroup(r+1),l=0,p=n.length;l<p;l++)this.tag.insertRule(u,n[l])&&(this.groupSizes[r]++,u++)},t.clearGroup=function(r){if(r<this.length){var n=this.groupSizes[r],o=this.indexOfGroup(r),a=o+n;this.groupSizes[r]=0;for(var i=o;i<a;i++)this.tag.deleteRule(o)}},t.getGroup=function(r){var n="";if(r>=this.length||this.groupSizes[r]===0)return n;for(var o=this.groupSizes[r],a=this.indexOfGroup(r),i=a+o,c=a;c<i;c++)n+=this.tag.getRule(c)+`/*!sc*/
`;return n},e}(),We=new Map,He=new Map,Oe=1,_e=function(e){if(We.has(e))return We.get(e);for(;He.has(Oe);)Oe++;var t=Oe++;return We.set(e,t),He.set(t,e),t},Yn=function(e){return He.get(e)},Xn=function(e,t){t>=Oe&&(Oe=t+1),We.set(e,t),He.set(t,e)},Jn="style["+Ie+'][data-styled-version="5.3.9"]',Kn=new RegExp("^"+Ie+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),qn=function(e,t,r){for(var n,o=r.split(","),a=0,i=o.length;a<i;a++)(n=o[a])&&e.registerName(t,n)},Zn=function(e,t){for(var r=(t.textContent||"").split(`/*!sc*/
`),n=[],o=0,a=r.length;o<a;o++){var i=r[o].trim();if(i){var c=i.match(Kn);if(c){var u=0|parseInt(c[1],10),l=c[2];u!==0&&(Xn(l,u),qn(e,l,c[3]),e.getTag().insertRules(u,n)),n.length=0}else n.push(i)}}},Qn=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},fr=function(e){var t=document.head,r=e||t,n=document.createElement("style"),o=function(c){for(var u=c.childNodes,l=u.length;l>=0;l--){var p=u[l];if(p&&p.nodeType===1&&p.hasAttribute(Ie))return p}}(r),a=o!==void 0?o.nextSibling:null;n.setAttribute(Ie,"active"),n.setAttribute("data-styled-version","5.3.9");var i=Qn();return i&&n.setAttribute("nonce",i),r.insertBefore(n,a),n},eo=function(){function e(r){var n=this.element=fr(r);n.appendChild(document.createTextNode("")),this.sheet=function(o){if(o.sheet)return o.sheet;for(var a=document.styleSheets,i=0,c=a.length;i<c;i++){var u=a[i];if(u.ownerNode===o)return u}Fe(17)}(n),this.length=0}var t=e.prototype;return t.insertRule=function(r,n){try{return this.sheet.insertRule(n,r),this.length++,!0}catch{return!1}},t.deleteRule=function(r){this.sheet.deleteRule(r),this.length--},t.getRule=function(r){var n=this.sheet.cssRules[r];return n!==void 0&&typeof n.cssText=="string"?n.cssText:""},e}(),to=function(){function e(r){var n=this.element=fr(r);this.nodes=n.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(r,n){if(r<=this.length&&r>=0){var o=document.createTextNode(n),a=this.nodes[r];return this.element.insertBefore(o,a||null),this.length++,!0}return!1},t.deleteRule=function(r){this.element.removeChild(this.nodes[r]),this.length--},t.getRule=function(r){return r<this.length?this.nodes[r].textContent:""},e}(),ro=function(){function e(r){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(r,n){return r<=this.length&&(this.rules.splice(r,0,n),this.length++,!0)},t.deleteRule=function(r){this.rules.splice(r,1),this.length--},t.getRule=function(r){return r<this.length?this.rules[r]:""},e}(),Yt=Et,no={isServer:!Et,useCSSOMInjection:!Vn},pr=function(){function e(r,n,o){r===void 0&&(r=ge),n===void 0&&(n={}),this.options=fe({},no,{},r),this.gs=n,this.names=new Map(o),this.server=!!r.isServer,!this.server&&Et&&Yt&&(Yt=!1,function(a){for(var i=document.querySelectorAll(Jn),c=0,u=i.length;c<u;c++){var l=i[c];l&&l.getAttribute(Ie)!=="active"&&(Zn(a,l),l.parentNode&&l.parentNode.removeChild(l))}}(this))}e.registerId=function(r){return _e(r)};var t=e.prototype;return t.reconstructWithOptions=function(r,n){return n===void 0&&(n=!0),new e(fe({},this.options,{},r),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(r){return this.gs[r]=(this.gs[r]||0)+1},t.getTag=function(){return this.tag||(this.tag=(o=(n=this.options).isServer,a=n.useCSSOMInjection,i=n.target,r=o?new ro(i):a?new eo(i):new to(i),new Hn(r)));var r,n,o,a,i},t.hasNameForId=function(r,n){return this.names.has(r)&&this.names.get(r).has(n)},t.registerName=function(r,n){if(_e(r),this.names.has(r))this.names.get(r).add(n);else{var o=new Set;o.add(n),this.names.set(r,o)}},t.insertRules=function(r,n,o){this.registerName(r,n),this.getTag().insertRules(_e(r),o)},t.clearNames=function(r){this.names.has(r)&&this.names.get(r).clear()},t.clearRules=function(r){this.getTag().clearGroup(_e(r)),this.clearNames(r)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(r){for(var n=r.getTag(),o=n.length,a="",i=0;i<o;i++){var c=Yn(i);if(c!==void 0){var u=r.names.get(c),l=n.getGroup(i);if(u&&l&&u.size){var p=Ie+".g"+i+'[id="'+c+'"]',h="";u!==void 0&&u.forEach(function(C){C.length>0&&(h+=C+",")}),a+=""+l+p+'{content:"'+h+`"}/*!sc*/
`}}}return a}(this)},e}(),oo=/(a)(d)/gi,Xt=function(e){return String.fromCharCode(e+(e>25?39:97))};function mt(e){var t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=Xt(t%52)+r;return(Xt(t%52)+r).replace(oo,"$1-$2")}var be=function(e,t){for(var r=t.length;r;)e=33*e^t.charCodeAt(--r);return e},hr=function(e){return be(5381,e)};function ao(e){for(var t=0;t<e.length;t+=1){var r=e[t];if(je(r)&&!Tt(r))return!1}return!0}var io=hr("5.3.9"),so=function(){function e(t,r,n){this.rules=t,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&ao(t),this.componentId=r,this.baseHash=be(io,r),this.baseStyle=n,pr.registerId(r)}return e.prototype.generateAndInjectStyles=function(t,r,n){var o=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(t,r,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&r.hasNameForId(o,this.staticRulesId))a.push(this.staticRulesId);else{var i=xe(this.rules,t,r,n).join(""),c=mt(be(this.baseHash,i)>>>0);if(!r.hasNameForId(o,c)){var u=n(i,"."+c,void 0,o);r.insertRules(o,c,u)}a.push(c),this.staticRulesId=c}else{for(var l=this.rules.length,p=be(this.baseHash,n.hash),h="",C=0;C<l;C++){var x=this.rules[C];if(typeof x=="string")h+=x;else if(x){var v=xe(x,t,r,n),y=Array.isArray(v)?v.join(""):v;p=be(p,y+C),h+=y}}if(h){var d=mt(p>>>0);if(!r.hasNameForId(o,d)){var I=n(h,"."+d,void 0,o);r.insertRules(o,d,I)}a.push(d)}}return a.join(" ")},e}(),co=/^\s*\/\/.*$/gm,lo=[":","[",".","#"];function uo(e){var t,r,n,o,a=e===void 0?ge:e,i=a.options,c=i===void 0?ge:i,u=a.plugins,l=u===void 0?Ve:u,p=new jn(c),h=[],C=function(y){function d(I){if(I)try{y(I+"}")}catch{}}return function(I,b,_,T,M,P,k,A,L,G){switch(I){case 1:if(L===0&&b.charCodeAt(0)===64)return y(b+";"),"";break;case 2:if(A===0)return b+"/*|*/";break;case 3:switch(A){case 102:case 112:return y(_[0]+b),"";default:return b+(G===0?"/*|*/":"")}case-2:b.split("/*|*/}").forEach(d)}}}(function(y){h.push(y)}),x=function(y,d,I){return d===0&&lo.indexOf(I[r.length])!==-1||I.match(o)?y:"."+t};function v(y,d,I,b){b===void 0&&(b="&");var _=y.replace(co,""),T=d&&I?I+" "+d+" { "+_+" }":_;return t=b,r=d,n=new RegExp("\\"+r+"\\b","g"),o=new RegExp("(\\"+r+"\\b){2,}"),p(I||!d?"":d,T)}return p.use([].concat(l,[function(y,d,I){y===2&&I.length&&I[0].lastIndexOf(r)>0&&(I[0]=I[0].replace(n,x))},C,function(y){if(y===-2){var d=h;return h=[],d}}])),v.hash=l.length?l.reduce(function(y,d){return d.name||Fe(15),be(y,d.name)},5381).toString():"",v}var mr=Ye.createContext();mr.Consumer;var gr=Ye.createContext(),fo=(gr.Consumer,new pr),gt=uo();function po(){return B.useContext(mr)||fo}function ho(){return B.useContext(gr)||gt}var mo=function(){function e(t,r){var n=this;this.inject=function(o,a){a===void 0&&(a=gt);var i=n.name+a.hash;o.hasNameForId(n.id,i)||o.insertRules(n.id,i,a(n.rules,i,"@keyframes"))},this.toString=function(){return Fe(12,String(n.name))},this.name=t,this.id="sc-keyframes-"+t,this.rules=r}return e.prototype.getName=function(t){return t===void 0&&(t=gt),this.name+t.hash},e}(),go=/([A-Z])/,yo=/([A-Z])/g,vo=/^ms-/,wo=function(e){return"-"+e.toLowerCase()};function Jt(e){return go.test(e)?e.replace(yo,wo).replace(vo,"-ms-"):e}var Kt=function(e){return e==null||e===!1||e===""};function xe(e,t,r,n){if(Array.isArray(e)){for(var o,a=[],i=0,c=e.length;i<c;i+=1)(o=xe(e[i],t,r,n))!==""&&(Array.isArray(o)?a.push.apply(a,o):a.push(o));return a}if(Kt(e))return"";if(Tt(e))return"."+e.styledComponentId;if(je(e)){if(typeof(l=e)!="function"||l.prototype&&l.prototype.isReactComponent||!t)return e;var u=e(t);return xe(u,t,r,n)}var l;return e instanceof mo?r?(e.inject(r,n),e.getName(n)):e:ht(e)?function p(h,C){var x,v,y=[];for(var d in h)h.hasOwnProperty(d)&&!Kt(h[d])&&(Array.isArray(h[d])&&h[d].isCss||je(h[d])?y.push(Jt(d)+":",h[d],";"):ht(h[d])?y.push.apply(y,p(h[d],d)):y.push(Jt(d)+": "+(x=d,(v=h[d])==null||typeof v=="boolean"||v===""?"":typeof v!="number"||v===0||x in Mn?String(v).trim():v+"px")+";"));return C?[C+" {"].concat(y,["}"]):y}(e):e.toString()}var qt=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function bo(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return je(e)||ht(e)?qt(xe(Vt(Ve,[e].concat(r)))):r.length===0&&e.length===1&&typeof e[0]=="string"?e:qt(xe(Vt(e,r)))}var So=function(e,t,r){return r===void 0&&(r=ge),e.theme!==r.theme&&e.theme||t||r.theme},Io=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,xo=/(^-|-$)/g;function lt(e){return e.replace(Io,"-").replace(xo,"")}var Co=function(e){return mt(hr(e)>>>0)};function Ne(e){return typeof e=="string"&&!0}var yt=function(e){return typeof e=="function"||typeof e=="object"&&e!==null&&!Array.isArray(e)},Ao=function(e){return e!=="__proto__"&&e!=="constructor"&&e!=="prototype"};function Po(e,t,r){var n=e[r];yt(t)&&yt(n)?yr(n,t):e[r]=t}function yr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var o=0,a=r;o<a.length;o++){var i=a[o];if(yt(i))for(var c in i)Ao(c)&&Po(e,i[c],c)}return e}var vr=Ye.createContext();vr.Consumer;var ut={};function wr(e,t,r){var n=Tt(e),o=!Ne(e),a=t.attrs,i=a===void 0?Ve:a,c=t.componentId,u=c===void 0?function(b,_){var T=typeof b!="string"?"sc":lt(b);ut[T]=(ut[T]||0)+1;var M=T+"-"+Co("5.3.9"+T+ut[T]);return _?_+"-"+M:M}(t.displayName,t.parentComponentId):c,l=t.displayName,p=l===void 0?function(b){return Ne(b)?"styled."+b:"Styled("+Ht(b)+")"}(e):l,h=t.displayName&&t.componentId?lt(t.displayName)+"-"+t.componentId:t.componentId||u,C=n&&e.attrs?Array.prototype.concat(e.attrs,i).filter(Boolean):i,x=t.shouldForwardProp;n&&e.shouldForwardProp&&(x=t.shouldForwardProp?function(b,_,T){return e.shouldForwardProp(b,_,T)&&t.shouldForwardProp(b,_,T)}:e.shouldForwardProp);var v,y=new so(r,h,n?e.componentStyle:void 0),d=y.isStatic&&i.length===0,I=function(b,_){return function(T,M,P,k){var A=T.attrs,L=T.componentStyle,G=T.defaultProps,ee=T.foldedComponentIds,Y=T.shouldForwardProp,ae=T.styledComponentId,ce=T.target,X=function(O,s,F){O===void 0&&(O=ge);var f=fe({},s,{theme:O}),V={};return F.forEach(function($){var N,R,K,ne=$;for(N in je(ne)&&(ne=ne(f)),ne)f[N]=V[N]=N==="className"?(R=V[N],K=ne[N],R&&K?R+" "+K:R||K):ne[N]}),[f,V]}(So(M,B.useContext(vr),G)||ge,M,A),he=X[0],ie=X[1],le=function(O,s,F,f){var V=po(),$=ho(),N=s?O.generateAndInjectStyles(ge,V,$):O.generateAndInjectStyles(F,V,$);return N}(L,k,he),Ae=P,ve=ie.$as||M.$as||ie.as||M.as||ce,Pe=Ne(ve),S=ie!==M?fe({},M,{},ie):M,g={};for(var w in S)w[0]!=="$"&&w!=="as"&&(w==="forwardedAs"?g.as=S[w]:(Y?Y(w,Wt,ve):!Pe||Wt(w))&&(g[w]=S[w]));return M.style&&ie.style!==M.style&&(g.style=fe({},M.style,{},ie.style)),g.className=Array.prototype.concat(ee,ae,le!==ae?le:null,M.className,ie.className).filter(Boolean).join(" "),g.ref=Ae,B.createElement(ve,g)}(v,b,_,d)};return I.displayName=p,(v=Ye.forwardRef(I)).attrs=C,v.componentStyle=y,v.displayName=p,v.shouldForwardProp=x,v.foldedComponentIds=n?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):Ve,v.styledComponentId=h,v.target=n?e.target:e,v.withComponent=function(b){var _=t.componentId,T=function(P,k){if(P==null)return{};var A,L,G={},ee=Object.keys(P);for(L=0;L<ee.length;L++)A=ee[L],k.indexOf(A)>=0||(G[A]=P[A]);return G}(t,["componentId"]),M=_&&_+"-"+(Ne(b)?b:lt(Ht(b)));return wr(b,fe({},T,{attrs:C,componentId:M}),r)},Object.defineProperty(v,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(b){this._foldedDefaultProps=n?yr({},e.defaultProps,b):b}}),Object.defineProperty(v,"toString",{value:function(){return"."+v.styledComponentId}}),o&&zn(v,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),v}var vt=function(e){return function t(r,n,o){if(o===void 0&&(o=ge),!Le.isValidElementType(n))return Fe(1,String(n));var a=function(){return r(n,o,bo.apply(void 0,arguments))};return a.withConfig=function(i){return t(r,n,fe({},o,{},i))},a.attrs=function(i){return t(r,n,fe({},o,{attrs:Array.prototype.concat(o.attrs,i).filter(Boolean)}))},a}(wr,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(e){vt[e]=vt(e)});const W=vt,ko=W.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 255px;
    overflow: hidden;
`,To=W.div`
    position: relative;
    text-decoration: none;
    display: block;
`,Eo=W.div`
    width: 175px;
    min-height: 158px;
    border-radius: 4px;
    padding: 5px 5px 5px 5px;
    margin: 0rem 1.0rem .5rem 2.0rem;
    opacity: 1;
    background-color: 1;
    transition: box-shadow 100ms linear 0s;
`,Zt=W.div`
    display: flex;
`,Oo=W.div`
    display: flex;
    flex-direction: column;
    margin: 0px 5px 0px 0px;
`,Ro=W.span`
    font-family: Inter;
    font-size: 12px;
    font-weight: 600;
    line-height: 20px;
    letter-spacing: -0.006em;
    color: rgb(42, 51, 61)
`,Lo=W.span`
    font-family: Inter;
    font-size: 10px;
    line-height: 16px;
    color: rgb(91, 102, 113)
`,jo=W.div`
    custor: pointer;
    height: 115px;
    width: 115px;
    border-radius: 4px;
    background-size: cover;
    background-color: white;
    background-position: center center;
    overflow: hidden;
`,Mo=W.div`
    transition: opacity 100ms linear 0s;
    overflow: hidden;
    background-color: rgb(226, 226, 226);
    display: flex;
    -webkit-box-align: center;
    align-items: center;
    -webkit-box-pack: center;
    justify-content: center;
    height: 100%;
    width: 100%;
`,Fo=W.div`
    display: flex;
    flex-direction: column;
    margin: 0rem .1rem 0rem .4rem;
    padding: 0px .2em 0px .5em;
    border: 1.5px solid rgb(233, 234, 236);
    border-radius: 4px;
    align-items: center;
    justify-content: center;
`;W.div`
    height: 80px;
    width: 80px;
    display: flex;
    justify-content: space-evenly;
    -webkit-box-align: center;
    align-items: center;
    flex-direction: column;
    margin-bottom: 10px;
`;const $o=W.div`
    margin-top: 6px;
`,Do=W.div`
    font-family: Inter;
    font-size: 12px;
    font-weight: 550;
    color: rgb(42, 51, 61);
    line-height: 24px;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
    text-align: left;
`,_o=W.div`
    position: relative;
    width: fit-content;
    text-align: left;
`,No=W.div`
    position: relative;
    font-family: Inter;
    font-size: 10px;
    line-height: 16px;
    color: rgb(115, 127, 140);
    margin-top: -2px;
    min-height: 16px;
    width: fit-content;
    overflow: visible;
    text-align: left;
`,Uo=W.div`
    display: flex;
    flex-direction: column;
    flex-row: row wrap;
    overflow: visible;
    align-items: center;
`,Wo=W.div`
    position: relative;
    text-decoration: none;
    display: block;
`,Go=W.div`
    width: 175px;
    border-radius: 4px;
    padding: 5px 5px 5px 5px;
    margin: 0rem 1.0rem .5rem 2.0rem;
    opacity: 1;
    background-color: 1;
    transition: box-shadow 100ms linear 0s;
    overflow-y: auto;
`,Qt=W.div`
    display: flex;
`,Bo=W.div`
    display: flex;
    flex-direction: column;
    margin: 0px 5px 0px 0px;
`,zo=W.div`
    custor: pointer;
    height: 56px;
    width: 56px;
    border-radius: 4px;
    background-size: cover;
    background-color: white;
    background-position: center center;
    overflow: hidden;
`,Vo=W.div`
    transition: opacity 100ms linear 0s;
    overflow: hidden;
    background-color: rgb(226, 226, 226);
    display: flex;
    -webkit-box-align: center;
    align-items: center;
    -webkit-box-pack: center;
    justify-content: center;
    height: 100%;
    width: 100%;
`,Ho=W.div`
    display: flex;
    flex-direction: column;
    margin: 0rem .1rem 0rem .4rem;
    padding: 0px .2em 0px .5em;
    border-radius: 4px;
    align-items: center;
    justify-content: center;
`;W.div`
    height: 80px;
    width: 80px;
    display: flex;
    justify-content: space-evenly;
    -webkit-box-align: center;
    align-items: center;
    flex-direction: column;
    margin-bottom: 10px;
`;W.div`
    margin-top: 6px;
`;const Yo=W.div`
    font-family: Inter;
    font-size: 12px;
    font-weight: 550;
    color: rgb(42, 51, 61);
    line-height: 24px;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
    text-align: left;
`,Xo=W.div`
    position: relative;
    width: fit-content;
    text-align: left;
`,Jo=W.div`
    position: relative;
    font-family: Inter;
    font-size: 10px;
    line-height: 16px;
    color: rgb(115, 127, 140);
    margin-top: -2px;
    min-height: 16px;
    width: fit-content;
    overflow: visible;
    text-align: left;
`;function Ko(e){const{proposal:t,proposalSelectionHandler:r,isSelected:n}=e,o=de.FormatThumbnailUrl(t.projectId,t.urn);return m(pe,{children:m(Wo,{onClick:()=>{r(t.id)},children:m(Go,{id:t.proposalId,className:n?"proposal selected":"proposal",children:oe(Qt,{className:"infos",children:[m(zo,{children:m(Vo,{children:m("img",{alt:"Site Preview",src:o,width:"56",height:"56"})})}),m(Ho,{children:m(Qt,{children:oe(Bo,{children:[m(Yo,{children:t.name}),m(Xo,{children:m(Jo,{children:t.creationDate})})]})})})]})})})})}function qo(e){const{proposals:t,proposalSelectionHandler:r,selectedProposalId:n}=e;return t?m(pe,{children:m("div",{"data-checkly":"ProposalList",children:m(Uo,{children:t==null?void 0:t.map(o=>m(Ko,{proposal:o,proposalSelectionHandler:r,isSelected:o.proposalId===n},o.proposalId))})})}):m(pe,{children:m("div",{"data-checkly":"ProposalList"})})}function Zo(e){const{project:t,projectSelectionHandler:r,proposalSelectionHandler:n,isSelected:o,selectedProposalId:a}=e,i=de.FormatThumbnailUrl(t.projectId,t.urn);return oe(pe,{children:[m(To,{onClick:()=>{r(t.id)},children:oe(Eo,{id:t.projectId,className:o?"project selected":"project",children:[oe(Zt,{className:"infos",children:[m(jo,{children:m(Mo,{children:m("img",{alt:"Site Preview",src:i,width:"115",height:"115"})})}),m(Fo,{children:m(Zt,{children:oe(Oo,{children:[m(Ro,{children:t.proposalCount}),m(Lo,{children:"Proposals"})]})})})]}),oe($o,{children:[m(Do,{children:t.name}),m(_o,{children:m(No,{children:t.creationTime})})]})]})}),m("div",{id:t.proposalsListContainer,className:o?"proposal-visible":"proposal-hidden",children:m(qo,{proposals:t.proposals,proposalSelectionHandler:n,selectedProposalId:a})})]})}function Qo(e){const{projects:t,projectSelectionHandler:r,proposalSelectionHandler:n,selectedProjectId:o,selectedProposalId:a}=e;if(!t)return m(pe,{children:m("div",{"data-checkly":"ProjectList"})});function i(u){document.querySelectorAll(".project.selected").forEach(h=>{h.classList.remove("selected")}),document.querySelectorAll(".proposal-visible").forEach(h=>{h.classList.remove("proposal-visible"),h.classList.add("proposal-hidden")}),c(""),r(u)}function c(u){document.querySelectorAll(".proposal.selected").forEach(p=>{p.classList.remove("selected")}),n(u)}return m(pe,{children:m("div",{id:"projectlist-container","data-checkly":"ProjectList",children:m(ko,{children:t==null?void 0:t.map(u=>m(Zo,{project:u,projectSelectionHandler:i,proposalSelectionHandler:c,isSelected:u.projectId===o,selectedProposalId:a},u.projectId))})})})}class ea extends It{constructor(){super(...arguments);re(this,"projectId");re(this,"newestProposalId");re(this,"creationTime");re(this,"proposalCount");re(this,"proposals");re(this,"proposalsListContainer")}Fill(r,n,o,a){super.Fill(r,n,o,a,""),this.projectId=this.id,this.newestProposalId="",this.creationTime="",this.proposalCount=0}}class ta extends It{constructor(){super(...arguments);re(this,"proposalId");re(this,"projectId");re(this,"creationDate")}Fill(r,n,o,a,i){super.Fill(r,n,o,a,i),this.proposalId=this.id,this.creationDate=""}}function ra(){function e(P,k){P.then(k).catch(A=>console.log(A))}function t(P){try{let k=P!==null&&P.length>0;if(document.getElementById("message").style.display=k?"block":"none",k){x("info"),h("");let A=P.map(L=>{var G=new It;return G.Fill(L.id,L.name,L.version,L.metadata,L.urn),G});y(A),A.length>0&&o(A[0].id)}}catch{const A="Unable to read workspaces";throw x("error"),h(A),new Error(A)}}async function r(P){try{let k=P.filter(A=>A.metadata!==null&&!A.metadata.isDraft&&A.version!==1).map(A=>{var L=new ea;L.Fill(A.id,A.name,A.version,A.metadata);let ee=new Date().getTime()-A.created,Y=Math.floor(ee/(1e3*24*60*60));return L.creationTime=Y==0?"Today":`${Y} days ago`,L});await n(k),x("info"),h("")}catch{const A="Unable to read projects from selected workspace";throw x("error"),h(A),new Error(A)}}async function n(P){try{x("info"),h("Fetching proposals...");for(const k of P)await de.getProposals(k.projectId).then(A=>{k.proposals=A.map(L=>{var G=new ta;const ee=L.urn.split(":");let Y=ee[ee.length-2],ae=ee[ee.length-1],ce=L.properties.name;G.Fill(Y,ce,ae,L.metadata,L.urn);let X=new Date(L.metadata.createdAt),he=X.getHours(),ie=X.getMinutes();return X.getDate()===new Date().getDate()?G.creationDate=`Today ${he}:${ie} ${he<12?"AM":"PM"}`:G.creationDate=`${X.toLocaleString()}`,G.projectId=k.projectId,G}),k.proposals.sort(function(L,G){return new Date(L.metadata.createdAt).getTime()-new Date(G.metadata.createdAt).getTime()}),k.proposals.length>0&&(k.newestProposalId=k.proposals[0].id,k.urn=k.proposals[0].urn,k.proposalCount=k.proposals.length),k.proposalsListContainer=`project-${k.projectId}-proposals-list`});_(P),x("info"),h("")}catch{const A="Unable to read proposals from projects";throw x("error"),h(A),new Error(A)}}function o(P){x("info"),h("Fetching projects..."),e(de.getProjects(P),r.bind(this))}function a(){let P=document.getElementById("workspace-select");P!==null&&o(P.value)}async function i(P){if(d!==null&&(d==null?void 0:d.projectId)===P)I(null);else{let k=b==null?void 0:b.filter(A=>A.projectId==P);I(k!==null?k[0]:null)}}async function c(P){if(T!==null&&(T==null?void 0:T.proposalId)===P)M(null);else if(d!==null){let ee=d.proposals.filter(Y=>Y.proposalId==P);M(ee!==null?ee[0]:null)}else M(null);const k=await FormIt.Model.IsModified(),A=d!==null&&(d==null?void 0:d.projectId)!==""&&P!=="";let L=document.getElementById("sync-btn"),G=document.getElementById("load-btn");L!==null&&(L.disabled=!k||!A),G!==null&&(G.disabled=!A)}function u(){let P=document.getElementById("projectlist-container");P.classList.add("disabled");let k=document.getElementById("message");k.className="info",k.textContent="Loading datas from Forma...";debugger;Ee.getElementsAndSaveCache(T,async()=>{Ee.fetchAndLoadElements(void 0,[],T,A=>{x(A?"success":"error"),h(A?"Datas have been synchronized successfully on Forma":"Synchronization failed"),P.classList.remove("disabled"),this.enableSyncFunction(T.proposalId)})})}function l(){let P=document.getElementById("projectlist-container");P.classList.add("disabled");let k=document.getElementById("message");k.className="info",k.textContent="Sending datas to Forma...";let A=d.projectId,L=T.projectId;Ee.save({projectId:A,proposalId:L},G=>{x(G?"success":"error"),h(G?"Datas have been synchronized successfully on Forma":"Synchronization failed"),P.classList.remove("disabled")})}const[p,h]=B.useState(""),[C,x]=B.useState("info"),[v,y]=B.useState(),[d,I]=B.useState(null),[b,_]=B.useState(),[T,M]=B.useState(null);return B.useEffect(()=>{h("Fetching worskpaces..."),e(de.getWorkspaces(),t.bind(this));let P=document.getElementById("sync-btn");P!==null&&(P.disabled=!0);let k=document.getElementById("load-btn");k!==null&&(k.disabled=!0)},[]),m("div",{id:"FormaControls",className:"col-md-12",children:oe("div",{className:"plugin plugin-container",children:[m("h3",{id:"identifier",children:"Welcome to Formit-Forma plugin"}),m("select",{id:"workspace-select",className:"fetchSelect",onChange:a.bind(this),defaultValue:"",hidden:!0,children:v==null?void 0:v.map(({id:P,name:k})=>m("option",{value:P,children:k},P))}),m(Qo,{projects:b,projectSelectionHandler:i,proposalSelectionHandler:c,selectedProjectId:d==null?void 0:d.projectId,selectedProposalId:T==null?void 0:T.proposalId}),oe("div",{id:"action",children:[m("button",{className:"st",id:"load-btn",onClick:u,children:"Load"}),m("button",{className:"st",id:"clear-btn",disabled:!0,children:"Clear"}),m("button",{className:"st",id:"sync-btn",onClick:l,children:"Sync"}),m("label",{id:"message",className:C,children:p})]})]})})}function na(){let e=window.location.href.indexOf("loggedIn=1")>-1,t=Ee.getCookie("ajs_user_id"),r=null;return e=e||t!==null,e?r=m(ra,{}):r=oe("div",{id:"LoginControls",className:"",children:[m("h4",{children:"Start plugin to select a project"}),oe("button",{id:"LoginButton",className:"button is-link",onClick:Pn.login,children:[m("span",{children:"Start plugin"}),m("i",{className:"fab fa-github fa-lg"})]})]}),{loggedIn:e,node:r}}function oa(){const[e,t]=B.useState(!1),[r,n]=B.useState(m(pe,{}));return B.useEffect(()=>{let o=na();o!==null&&(t(o.loggedIn),n(o.node))},[]),m("div",{id:"PluginWrapper",children:oe("div",{id:"PluginContainer",children:[m("h1",{className:"title",children:"Formit-Forma"}),m("h3",{className:"title",children:"Send data between FormIt and Forma"}),m("div",{id:"AppControls",children:m("div",{className:"container mt-3",children:m("div",{id:"app",children:r})})}),oe("div",{id:"NoAccess",hidden:!0,children:[m("div",{children:m("div",{className:"alertIcon"})}),oe("div",{children:["It looks like your web browser is in private or incognito mode. Formit-Forma plugin needs to save data to the local storage, so it can only be used in standard browsing mode.",m("br",{}),m("br",{}),"To use Formit-Forma Plugin, please switch to standard browsing mode."]})]})]})})}const aa=Ir.createRoot(document.getElementById("root"));aa.render(m(pe,{children:m("div",{id:"MainControls",children:m(Br,{children:m(oa,{})})})}));
